{"ast":null,"code":"var _jsxFileName = \"/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/PaymentMethod.jsx\",\n  _import$meta$env,\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// PaymentMethod.jsx (Vite)\n// Robust env + Stripe guards + clear UX states\n\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, useStripe } from '@stripe/react-stripe-js';\n\n// --- Safe Stripe init (won't throw if the key is missing) ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst pk = (_import$meta$env = import.meta.env) === null || _import$meta$env === void 0 ? void 0 : _import$meta$env.VITE_STRIPE_PUBLISHABLE_KEY;\nlet cachedStripePromise = null;\nfunction getStripePromise() {\n  if (!pk) return null;\n  if (!cachedStripePromise) cachedStripePromise = loadStripe(pk);\n  return cachedStripePromise;\n}\nexport default function PaymentMethodPage() {\n  _s();\n  const [clientSecret, setClientSecret] = useState(null);\n  const [hasDefault, setHasDefault] = useState(false);\n  const [linking, setLinking] = useState(false);\n  const [errorMsg, setErrorMsg] = useState('');\n  const [loadingStatus, setLoadingStatus] = useState(true);\n  const stripePromise = useMemo(getStripePromise, []); // null if no PK\n\n  // Check whether a default PM exists\n  useEffect(() => {\n    (async () => {\n      try {\n        const r = await fetch('/api/payments/has-default-payment-method', {\n          credentials: 'include'\n        });\n        const d = await r.json();\n        setHasDefault(!!d.hasDefault);\n      } catch {\n        setHasDefault(false);\n      } finally {\n        setLoadingStatus(false);\n      }\n    })();\n  }, []);\n  async function startBankLink() {\n    setLinking(true);\n    setErrorMsg('');\n    try {\n      const r = await fetch('/api/payments/create-setup-intent', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include'\n      });\n      if (!r.ok) {\n        const t = await r.text();\n        throw new Error(t || 'Failed to create SetupIntent.');\n      }\n      const {\n        clientSecret\n      } = await r.json();\n      if (!clientSecret) throw new Error('No client_secret returned.');\n      setClientSecret(clientSecret);\n    } catch (e) {\n      setErrorMsg(e.message || 'Something went wrong starting bank link.');\n    } finally {\n      setLinking(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 560,\n      margin: '0 auto',\n      padding: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginTop: 0\n      },\n      children: \"Payment Method\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), !pk && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fef2f2',\n        border: '1px solid #fecaca',\n        color: '#7f1d1d',\n        padding: '10px 12px',\n        borderRadius: 8,\n        marginBottom: 12\n      },\n      children: [\"Stripe publishable key missing. Add\", ' ', /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"VITE_STRIPE_PUBLISHABLE_KEY\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), ' ', \"to your frontend \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \".env\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 28\n      }, this), \" and restart the dev server.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fff7ed',\n        border: '1px solid #fed7aa',\n        color: '#7c2d12',\n        padding: '10px 12px',\n        borderRadius: 8,\n        marginBottom: 12\n      },\n      children: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), loadingStatus ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Checking your payment method\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: hasDefault ? 'Bank account on file for ACH debits.' : 'No bank account on file.'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), !hasDefault && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startBankLink,\n        disabled: linking || !pk,\n        style: {\n          background: '#4f46e5',\n          color: 'white',\n          border: '1px solid #4f46e5',\n          padding: '8px 14px',\n          borderRadius: 8,\n          cursor: linking || !pk ? 'not-allowed' : 'pointer'\n        },\n        children: linking ? 'Starting…' : 'Link Bank Account'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), clientSecret && stripePromise && /*#__PURE__*/_jsxDEV(Elements, {\n        stripe: stripePromise,\n        options: {\n          clientSecret\n        },\n        children: /*#__PURE__*/_jsxDEV(BankLinkFlow, {\n          clientSecret: clientSecret,\n          onComplete: () => {\n            setHasDefault(true);\n            setClientSecret(null);\n          },\n          onError: setErrorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n}\n_s(PaymentMethodPage, \"TvVcYRta6XXLhPyRDAJEQjsn1Jk=\");\n_c = PaymentMethodPage;\nfunction BankLinkFlow({\n  clientSecret,\n  onComplete,\n  onError\n}) {\n  _s2();\n  const stripe = useStripe();\n  const [working, setWorking] = useState(false);\n  async function handleLink() {\n    if (!stripe) {\n      onError === null || onError === void 0 ? void 0 : onError('Stripe not ready yet. Please try again in a moment.');\n      return;\n    }\n    setWorking(true);\n    try {\n      // 1) Open Financial Connections to collect the bank account\n      const {\n        error: collectError\n      } = await stripe.collectBankAccountForSetup({\n        clientSecret,\n        params: {\n          payment_method_type: 'us_bank_account'\n        }\n      });\n      if (collectError) throw collectError;\n\n      // 2) Confirm the SetupIntent (verifies + attaches PM to the Customer)\n      const {\n        error: confirmError\n      } = await stripe.confirmUsBankAccountSetup(clientSecret);\n      if (confirmError) throw confirmError;\n\n      // Webhook will persist the PM; we optimistically update UI\n      onComplete === null || onComplete === void 0 ? void 0 : onComplete();\n      alert('Bank account saved. ACH payments are now enabled.');\n    } catch (e) {\n      onError === null || onError === void 0 ? void 0 : onError((e === null || e === void 0 ? void 0 : e.message) || 'Failed to link bank account.');\n    } finally {\n      setWorking(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: 12\n    },\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLink,\n      disabled: !stripe || working,\n      style: {\n        background: '#10b981',\n        color: 'white',\n        border: '1px solid #10b981',\n        padding: '8px 14px',\n        borderRadius: 8,\n        cursor: !stripe || working ? 'not-allowed' : 'pointer'\n      },\n      children: working ? 'Connecting…' : 'Connect and Save Bank'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n_s2(BankLinkFlow, \"xI/djp9IF4sg6WO7GmySD1OaJqo=\", false, function () {\n  return [useStripe];\n});\n_c2 = BankLinkFlow;\nvar _c, _c2;\n$RefreshReg$(_c, \"PaymentMethodPage\");\n$RefreshReg$(_c2, \"BankLinkFlow\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","loadStripe","Elements","useStripe","jsxDEV","_jsxDEV","Fragment","_Fragment","pk","_import$meta$env","import","meta","env","VITE_STRIPE_PUBLISHABLE_KEY","cachedStripePromise","getStripePromise","PaymentMethodPage","_s","clientSecret","setClientSecret","hasDefault","setHasDefault","linking","setLinking","errorMsg","setErrorMsg","loadingStatus","setLoadingStatus","stripePromise","r","fetch","credentials","d","json","startBankLink","method","headers","ok","t","text","Error","e","message","style","maxWidth","margin","padding","children","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","background","border","color","borderRadius","marginBottom","onClick","disabled","cursor","stripe","options","BankLinkFlow","onComplete","onError","_c","_s2","working","setWorking","handleLink","error","collectError","collectBankAccountForSetup","params","payment_method_type","confirmError","confirmUsBankAccountSetup","alert","_c2","$RefreshReg$"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/PaymentMethod.jsx"],"sourcesContent":["// PaymentMethod.jsx (Vite)\r\n// Robust env + Stripe guards + clear UX states\r\n\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Elements, useStripe } from '@stripe/react-stripe-js';\r\n\r\n// --- Safe Stripe init (won't throw if the key is missing) ---\r\nconst pk = import.meta.env?.VITE_STRIPE_PUBLISHABLE_KEY;\r\nlet cachedStripePromise = null;\r\nfunction getStripePromise() {\r\n  if (!pk) return null;\r\n  if (!cachedStripePromise) cachedStripePromise = loadStripe(pk);\r\n  return cachedStripePromise;\r\n}\r\n\r\nexport default function PaymentMethodPage() {\r\n  const [clientSecret, setClientSecret] = useState(null);\r\n  const [hasDefault, setHasDefault] = useState(false);\r\n  const [linking, setLinking] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const [loadingStatus, setLoadingStatus] = useState(true);\r\n\r\n  const stripePromise = useMemo(getStripePromise, []); // null if no PK\r\n\r\n  // Check whether a default PM exists\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        const r = await fetch('/api/payments/has-default-payment-method', {\r\n          credentials: 'include',\r\n        });\r\n        const d = await r.json();\r\n        setHasDefault(!!d.hasDefault);\r\n      } catch {\r\n        setHasDefault(false);\r\n      } finally {\r\n        setLoadingStatus(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  async function startBankLink() {\r\n    setLinking(true);\r\n    setErrorMsg('');\r\n    try {\r\n      const r = await fetch('/api/payments/create-setup-intent', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        credentials: 'include',\r\n      });\r\n      if (!r.ok) {\r\n        const t = await r.text();\r\n        throw new Error(t || 'Failed to create SetupIntent.');\r\n      }\r\n      const { clientSecret } = await r.json();\r\n      if (!clientSecret) throw new Error('No client_secret returned.');\r\n      setClientSecret(clientSecret);\r\n    } catch (e) {\r\n      setErrorMsg(e.message || 'Something went wrong starting bank link.');\r\n    } finally {\r\n      setLinking(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ maxWidth: 560, margin: '0 auto', padding: 16 }}>\r\n      <h2 style={{ marginTop: 0 }}>Payment Method</h2>\r\n\r\n      {/* Env/key guard */}\r\n      {!pk && (\r\n        <div\r\n          style={{\r\n            background: '#fef2f2',\r\n            border: '1px solid #fecaca',\r\n            color: '#7f1d1d',\r\n            padding: '10px 12px',\r\n            borderRadius: 8,\r\n            marginBottom: 12,\r\n          }}\r\n        >\r\n          Stripe publishable key missing. Add\r\n          {' '}\r\n          <code>VITE_STRIPE_PUBLISHABLE_KEY</code>\r\n          {' '}\r\n          to your frontend <code>.env</code> and restart the dev server.\r\n        </div>\r\n      )}\r\n\r\n      {errorMsg && (\r\n        <div\r\n          style={{\r\n            background: '#fff7ed',\r\n            border: '1px solid #fed7aa',\r\n            color: '#7c2d12',\r\n            padding: '10px 12px',\r\n            borderRadius: 8,\r\n            marginBottom: 12,\r\n          }}\r\n        >\r\n          {errorMsg}\r\n        </div>\r\n      )}\r\n\r\n      {loadingStatus ? (\r\n        <p>Checking your payment method…</p>\r\n      ) : (\r\n        <>\r\n          <p>\r\n            {hasDefault\r\n              ? 'Bank account on file for ACH debits.'\r\n              : 'No bank account on file.'}\r\n          </p>\r\n\r\n          {!hasDefault && (\r\n            <button\r\n              onClick={startBankLink}\r\n              disabled={linking || !pk}\r\n              style={{\r\n                background: '#4f46e5',\r\n                color: 'white',\r\n                border: '1px solid #4f46e5',\r\n                padding: '8px 14px',\r\n                borderRadius: 8,\r\n                cursor: linking || !pk ? 'not-allowed' : 'pointer',\r\n              }}\r\n            >\r\n              {linking ? 'Starting…' : 'Link Bank Account'}\r\n            </button>\r\n          )}\r\n\r\n          {/* Only render <Elements> when we actually have both a key and a clientSecret */}\r\n          {clientSecret && stripePromise && (\r\n            <Elements stripe={stripePromise} options={{ clientSecret }}>\r\n              <BankLinkFlow\r\n                clientSecret={clientSecret}\r\n                onComplete={() => {\r\n                  setHasDefault(true);\r\n                  setClientSecret(null);\r\n                }}\r\n                onError={setErrorMsg}\r\n              />\r\n            </Elements>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BankLinkFlow({ clientSecret, onComplete, onError }) {\r\n  const stripe = useStripe();\r\n  const [working, setWorking] = useState(false);\r\n\r\n  async function handleLink() {\r\n    if (!stripe) {\r\n      onError?.('Stripe not ready yet. Please try again in a moment.');\r\n      return;\r\n    }\r\n    setWorking(true);\r\n    try {\r\n      // 1) Open Financial Connections to collect the bank account\r\n      const { error: collectError } = await stripe.collectBankAccountForSetup({\r\n        clientSecret,\r\n        params: { payment_method_type: 'us_bank_account' },\r\n      });\r\n      if (collectError) throw collectError;\r\n\r\n      // 2) Confirm the SetupIntent (verifies + attaches PM to the Customer)\r\n      const { error: confirmError } = await stripe.confirmUsBankAccountSetup(\r\n        clientSecret\r\n      );\r\n      if (confirmError) throw confirmError;\r\n\r\n      // Webhook will persist the PM; we optimistically update UI\r\n      onComplete?.();\r\n      alert('Bank account saved. ACH payments are now enabled.');\r\n    } catch (e) {\r\n      onError?.(e?.message || 'Failed to link bank account.');\r\n    } finally {\r\n      setWorking(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginTop: 12 }}>\r\n      <button\r\n        onClick={handleLink}\r\n        disabled={!stripe || working}\r\n        style={{\r\n          background: '#10b981',\r\n          color: 'white',\r\n          border: '1px solid #10b981',\r\n          padding: '8px 14px',\r\n          borderRadius: 8,\r\n          cursor: !stripe || working ? 'not-allowed' : 'pointer',\r\n        }}\r\n      >\r\n        {working ? 'Connecting…' : 'Connect and Save Bank'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}