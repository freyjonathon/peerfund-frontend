{"ast":null,"code":"// src/features/wallet/WalletPanel.jsx\nimport React,{useState}from'react';import{createDeposit,fetchWallet}from'./walletApi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function WalletPanel(_ref){let{onClose,onBalanceUpdated}=_ref;const[amount,setAmount]=useState('25.00');const[busy,setBusy]=useState(false);const amountDollars=Math.max(1,Number((amount||'').replace(/[^0-9.]/g,''))||0);async function deposit(){try{setBusy(true);// 1) Ask backend to charge saved funding card & credit wallet\nawait createDeposit({amountDollars});// 2) Refresh wallet\nconst w=await fetchWallet();onBalanceUpdated===null||onBalanceUpdated===void 0?void 0:onBalanceUpdated(w.availableCents);onClose===null||onClose===void 0?void 0:onClose();}catch(e){console.error('Deposit failed:',e);alert(e.message||'Deposit failed');}finally{setBusy(false);}}return/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-panel\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add funds\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-wrap\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"$\"}),/*#__PURE__*/_jsx(\"input\",{value:amount,onChange:e=>setAmount(e.target.value),inputMode:\"decimal\",placeholder:\"25.00\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row right\",style:{marginTop:16},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:onClose,disabled:busy,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn primary\",onClick:deposit,disabled:busy,children:busy?'Processing…':'Continue'})]})]});}","map":{"version":3,"names":["React","useState","createDeposit","fetchWallet","jsx","_jsx","jsxs","_jsxs","WalletPanel","_ref","onClose","onBalanceUpdated","amount","setAmount","busy","setBusy","amountDollars","Math","max","Number","replace","deposit","w","availableCents","e","console","error","alert","message","className","children","value","onChange","target","inputMode","placeholder","style","marginTop","onClick","disabled"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/wallet/WalletPanel.jsx"],"sourcesContent":["// src/features/wallet/WalletPanel.jsx\nimport React, { useState } from 'react';\nimport { createDeposit, fetchWallet } from './walletApi';\n\nexport default function WalletPanel({ onClose, onBalanceUpdated }) {\n  const [amount, setAmount] = useState('25.00');\n  const [busy, setBusy] = useState(false);\n\n  const amountDollars = Math.max(\n    1,\n    Number((amount || '').replace(/[^0-9.]/g, '')) || 0\n  );\n\n  async function deposit() {\n    try {\n      setBusy(true);\n\n      // 1) Ask backend to charge saved funding card & credit wallet\n      await createDeposit({ amountDollars });\n\n      // 2) Refresh wallet\n      const w = await fetchWallet();\n      onBalanceUpdated?.(w.availableCents);\n      onClose?.();\n    } catch (e) {\n      console.error('Deposit failed:', e);\n      alert(e.message || 'Deposit failed');\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"wallet-panel\">\n      <h3>Add funds</h3>\n\n      <div className=\"row\">\n        <label>Amount</label>\n        <div className=\"input-wrap\">\n          <span>$</span>\n          <input\n            value={amount}\n            onChange={e => setAmount(e.target.value)}\n            inputMode=\"decimal\"\n            placeholder=\"25.00\"\n          />\n        </div>\n      </div>\n\n      <div className=\"row right\" style={{ marginTop: 16 }}>\n        <button className=\"btn\" onClick={onClose} disabled={busy}>\n          Cancel\n        </button>\n        <button className=\"btn primary\" onClick={deposit} disabled={busy}>\n          {busy ? 'Processing…' : 'Continue'}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,aAAa,CAAEC,WAAW,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzD,cAAe,SAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAgC,IAA/B,CAAEC,OAAO,CAAEC,gBAAiB,CAAC,CAAAF,IAAA,CAC/D,KAAM,CAACG,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,OAAO,CAAC,CAC7C,KAAM,CAACa,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAEvC,KAAM,CAAAe,aAAa,CAAGC,IAAI,CAACC,GAAG,CAC5B,CAAC,CACDC,MAAM,CAAC,CAACP,MAAM,EAAI,EAAE,EAAEQ,OAAO,CAAC,UAAU,CAAE,EAAE,CAAC,CAAC,EAAI,CACpD,CAAC,CAED,cAAe,CAAAC,OAAOA,CAAA,CAAG,CACvB,GAAI,CACFN,OAAO,CAAC,IAAI,CAAC,CAEb;AACA,KAAM,CAAAb,aAAa,CAAC,CAAEc,aAAc,CAAC,CAAC,CAEtC;AACA,KAAM,CAAAM,CAAC,CAAG,KAAM,CAAAnB,WAAW,CAAC,CAAC,CAC7BQ,gBAAgB,SAAhBA,gBAAgB,iBAAhBA,gBAAgB,CAAGW,CAAC,CAACC,cAAc,CAAC,CACpCb,OAAO,SAAPA,OAAO,iBAAPA,OAAO,CAAG,CAAC,CACb,CAAE,MAAOc,CAAC,CAAE,CACVC,OAAO,CAACC,KAAK,CAAC,iBAAiB,CAAEF,CAAC,CAAC,CACnCG,KAAK,CAACH,CAAC,CAACI,OAAO,EAAI,gBAAgB,CAAC,CACtC,CAAC,OAAS,CACRb,OAAO,CAAC,KAAK,CAAC,CAChB,CACF,CAEA,mBACER,KAAA,QAAKsB,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BzB,IAAA,OAAAyB,QAAA,CAAI,WAAS,CAAI,CAAC,cAElBvB,KAAA,QAAKsB,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClBzB,IAAA,UAAAyB,QAAA,CAAO,QAAM,CAAO,CAAC,cACrBvB,KAAA,QAAKsB,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBzB,IAAA,SAAAyB,QAAA,CAAM,GAAC,CAAM,CAAC,cACdzB,IAAA,UACE0B,KAAK,CAAEnB,MAAO,CACdoB,QAAQ,CAAER,CAAC,EAAIX,SAAS,CAACW,CAAC,CAACS,MAAM,CAACF,KAAK,CAAE,CACzCG,SAAS,CAAC,SAAS,CACnBC,WAAW,CAAC,OAAO,CACpB,CAAC,EACC,CAAC,EACH,CAAC,cAEN5B,KAAA,QAAKsB,SAAS,CAAC,WAAW,CAACO,KAAK,CAAE,CAAEC,SAAS,CAAE,EAAG,CAAE,CAAAP,QAAA,eAClDzB,IAAA,WAAQwB,SAAS,CAAC,KAAK,CAACS,OAAO,CAAE5B,OAAQ,CAAC6B,QAAQ,CAAEzB,IAAK,CAAAgB,QAAA,CAAC,QAE1D,CAAQ,CAAC,cACTzB,IAAA,WAAQwB,SAAS,CAAC,aAAa,CAACS,OAAO,CAAEjB,OAAQ,CAACkB,QAAQ,CAAEzB,IAAK,CAAAgB,QAAA,CAC9DhB,IAAI,CAAG,aAAa,CAAG,UAAU,CAC5B,CAAC,EACN,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}