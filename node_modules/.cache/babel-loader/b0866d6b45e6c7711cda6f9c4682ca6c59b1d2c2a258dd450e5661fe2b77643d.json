{"ast":null,"code":"var _jsxFileName = \"/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/TransactionHistory.jsx\",\n  _s = $RefreshSig$();\n// src/features/dashboard/TransactionHistory.jsx\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { CSVLink } from 'react-csv';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TransactionHistory = () => {\n  _s();\n  const [transactions, setTransactions] = useState([]);\n  const [totals, setTotals] = useState({\n    sent: 0,\n    received: 0,\n    net: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n\n  // --- helpers -----------------------------------------------------------\n\n  const getAmountCents = tx => {\n    if (typeof tx.amountCents === 'number') return tx.amountCents;\n    if (typeof tx.amount === 'number') return Math.round(tx.amount * 100);\n    return 0;\n  };\n  const formatDollars = cents => (cents / 100).toFixed(2);\n  const getDisplayDate = tx => {\n    const raw = tx.createdAt || tx.timestamp || tx.date;\n    if (!raw) return '';\n    return new Date(raw).toLocaleString();\n  };\n  const getDisplayType = tx => {\n    const t = (tx.type || '').toUpperCase();\n    switch (t) {\n      case 'DEPOSIT':\n        return 'Deposit to wallet';\n      case 'WITHDRAWAL':\n        return 'Withdrawal';\n      case 'REPAYMENT':\n        return 'Loan repayment';\n      case 'DISBURSEMENT':\n        return 'Loan disbursement';\n      case 'SUPERUSER_FEE':\n      case 'FEE':\n        return 'SuperUser fee';\n      case 'BANK_FEE':\n        return 'Bank fee';\n      case 'PLATFORM_FEE':\n        return 'Platform fee';\n      default:\n        return tx.type || 'Other';\n    }\n  };\n\n  // classify as money sent or received (best-effort, won’t crash)\n  const classifyFlow = tx => {\n    var _toUpperCase, _ref;\n    const t = (tx.type || '').toUpperCase();\n    const direction = ((_toUpperCase = (_ref = tx.direction || '').toUpperCase) === null || _toUpperCase === void 0 ? void 0 : _toUpperCase.call(_ref)) || '';\n    if (direction === 'DEBIT') return 'sent';\n    if (direction === 'CREDIT') return 'received';\n    if (['DISBURSEMENT', 'WITHDRAWAL', 'SUPERUSER_FEE', 'FEE', 'BANK_FEE', 'PLATFORM_FEE'].includes(t)) {\n      return 'sent';\n    }\n    if (['DEPOSIT', 'REPAYMENT'].includes(t)) {\n      return 'received';\n    }\n    return null;\n  };\n  const getLoanLabel = tx => {\n    if (!tx.loanId) return '';\n    // Show a short label like \"Loan …abcd12\" instead of full ObjectId\n    const id = String(tx.loanId);\n    const tail = id.slice(-6);\n    return `Loan …${tail}`;\n  };\n  const handleLoanClick = loanId => {\n    if (!loanId) return;\n    navigate(`/loan/${loanId}`);\n  };\n\n  // --- fetch on mount ----------------------------------------------------\n\n  useEffect(() => {\n    const fetchTransactions = async () => {\n      try {\n        setError('');\n        setLoading(true);\n        const res = await axios.get('/api/transactions', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        const txs = Array.isArray(res.data) ? res.data : [];\n        setTransactions(txs);\n        let sentCents = 0;\n        let receivedCents = 0;\n        txs.forEach(tx => {\n          const cents = getAmountCents(tx);\n          const flow = classifyFlow(tx);\n          if (flow === 'sent') sentCents += cents;\n          if (flow === 'received') receivedCents += cents;\n        });\n        setTotals({\n          sent: sentCents,\n          received: receivedCents,\n          net: receivedCents - sentCents\n        });\n      } catch (err) {\n        console.error('Failed to fetch transactions:', err);\n        setError('Failed to fetch transactions. Please try again later.');\n        setTransactions([]);\n        setTotals({\n          sent: 0,\n          received: 0,\n          net: 0\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchTransactions();\n  }, []);\n\n  // --- CSV export data ---------------------------------------------------\n\n  const csvData = transactions.map(tx => {\n    var _tx$fromUser, _tx$toUser;\n    return {\n      date: getDisplayDate(tx),\n      type: getDisplayType(tx),\n      amount: formatDollars(getAmountCents(tx)),\n      loanId: tx.loanId || '',\n      from: ((_tx$fromUser = tx.fromUser) === null || _tx$fromUser === void 0 ? void 0 : _tx$fromUser.name) || tx.fromName || '',\n      to: ((_tx$toUser = tx.toUser) === null || _tx$toUser === void 0 ? void 0 : _tx$toUser.name) || tx.toName || ''\n    };\n  });\n  const csvHeaders = [{\n    label: 'Date',\n    key: 'date'\n  }, {\n    label: 'Type',\n    key: 'type'\n  }, {\n    label: 'Amount (USD)',\n    key: 'amount'\n  }, {\n    label: 'Loan ID',\n    key: 'loanId'\n  }, {\n    label: 'From',\n    key: 'from'\n  }, {\n    label: 'To',\n    key: 'to'\n  }];\n\n  // --- render ------------------------------------------------------------\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '2rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginBottom: '1rem'\n      },\n      children: \"Transaction History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '1rem',\n        background: '#fee2e2',\n        border: '1px solid #fecaca',\n        color: '#991b1b',\n        padding: '0.75rem 1rem',\n        borderRadius: 8\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: '1rem',\n        marginBottom: '1.25rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '1 1 180px',\n          minWidth: 180,\n          borderRadius: 12,\n          border: '1px solid #e2e8f0',\n          padding: '0.75rem 1rem',\n          background: '#f8fafc'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 13,\n            color: '#64748b'\n          },\n          children: \"Total Sent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 700,\n            color: '#b91c1c'\n          },\n          children: [\"$\", formatDollars(totals.sent)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '1 1 180px',\n          minWidth: 180,\n          borderRadius: 12,\n          border: '1px solid #e2e8f0',\n          padding: '0.75rem 1rem',\n          background: '#f8fafc'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 13,\n            color: '#64748b'\n          },\n          children: \"Total Received\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 700,\n            color: '#166534'\n          },\n          children: [\"$\", formatDollars(totals.received)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '1 1 180px',\n          minWidth: 180,\n          borderRadius: 12,\n          border: '1px solid #e2e8f0',\n          padding: '0.75rem 1rem',\n          background: '#f8fafc'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 13,\n            color: '#64748b'\n          },\n          children: \"Net\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 20,\n            fontWeight: 700,\n            color: totals.net >= 0 ? '#166534' : '#b91c1c'\n          },\n          children: [\"$\", formatDollars(totals.net)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: '0 0 auto',\n          alignSelf: 'flex-end'\n        },\n        children: /*#__PURE__*/_jsxDEV(CSVLink, {\n          data: csvData,\n          headers: csvHeaders,\n          filename: \"transactions.csv\",\n          style: {\n            textDecoration: 'none'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              padding: '0.5rem 0.9rem',\n              borderRadius: 999,\n              border: '1px solid #0f172a',\n              background: '#0f172a',\n              color: '#f9fafb',\n              fontWeight: 600,\n              cursor: 'pointer'\n            },\n            children: \"\\u2B07\\uFE0F Download CSV\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderRadius: 12,\n        border: '1px solid #e2e8f0',\n        overflow: 'hidden',\n        background: '#ffffff'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        style: {\n          width: '100%',\n          borderCollapse: 'collapse',\n          fontSize: 14\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          style: {\n            background: '#f1f5f9',\n            textAlign: 'left'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '0.75rem 1rem',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '0.75rem 1rem',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '0.75rem 1rem',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '0.75rem 1rem',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"Loan\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '0.75rem 1rem',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"From\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: {\n                padding: '0.75rem 1rem',\n                borderBottom: '1px solid #e2e8f0'\n              },\n              children: \"To\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: loading ? /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 6,\n              style: {\n                padding: '1rem',\n                textAlign: 'center',\n                color: '#64748b'\n              },\n              children: \"Loading transactions\\u2026\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this) : transactions.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: 6,\n              style: {\n                padding: '1rem',\n                textAlign: 'center',\n                color: '#64748b'\n              },\n              children: \"No transactions yet. Deposits, repayments, withdrawals, and fees will appear here.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this) : transactions.map(tx => {\n            var _tx$fromUser2, _tx$toUser2;\n            const cents = getAmountCents(tx);\n            const flow = classifyFlow(tx);\n            const amountColor = flow === 'sent' ? '#b91c1c' : flow === 'received' ? '#166534' : '#0f172a';\n            const loanLabel = getLoanLabel(tx);\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '0.6rem 1rem',\n                  borderBottom: '1px solid #e2e8f0'\n                },\n                children: getDisplayDate(tx)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '0.6rem 1rem',\n                  borderBottom: '1px solid #e2e8f0'\n                },\n                children: getDisplayType(tx)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '0.6rem 1rem',\n                  borderBottom: '1px solid #e2e8f0',\n                  fontWeight: 600,\n                  color: amountColor\n                },\n                children: [\"$\", formatDollars(cents)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '0.6rem 1rem',\n                  borderBottom: '1px solid #e2e8f0'\n                },\n                children: tx.loanId ? /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => handleLoanClick(tx.loanId),\n                  style: {\n                    padding: '2px 8px',\n                    borderRadius: 999,\n                    border: '1px solid #e2e8f0',\n                    background: '#f8fafc',\n                    fontSize: 12,\n                    cursor: 'pointer'\n                  },\n                  children: loanLabel\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 332,\n                  columnNumber: 25\n                }, this) : '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '0.6rem 1rem',\n                  borderBottom: '1px solid #e2e8f0'\n                },\n                children: ((_tx$fromUser2 = tx.fromUser) === null || _tx$fromUser2 === void 0 ? void 0 : _tx$fromUser2.name) || tx.fromName || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: '0.6rem 1rem',\n                  borderBottom: '1px solid #e2e8f0'\n                },\n                children: ((_tx$toUser2 = tx.toUser) === null || _tx$toUser2 === void 0 ? void 0 : _tx$toUser2.name) || tx.toName || '—'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 21\n              }, this)]\n            }, tx.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 5\n  }, this);\n};\n_s(TransactionHistory, \"GFT1sgDAFfYcS30Lk4OJ3yoFoAo=\", false, function () {\n  return [useNavigate];\n});\n_c = TransactionHistory;\nexport default TransactionHistory;\nvar _c;\n$RefreshReg$(_c, \"TransactionHistory\");","map":{"version":3,"names":["React","useEffect","useState","axios","CSVLink","useNavigate","jsxDEV","_jsxDEV","TransactionHistory","_s","transactions","setTransactions","totals","setTotals","sent","received","net","loading","setLoading","error","setError","navigate","getAmountCents","tx","amountCents","amount","Math","round","formatDollars","cents","toFixed","getDisplayDate","raw","createdAt","timestamp","date","Date","toLocaleString","getDisplayType","t","type","toUpperCase","classifyFlow","_toUpperCase","_ref","direction","call","includes","getLoanLabel","loanId","id","String","tail","slice","handleLoanClick","fetchTransactions","res","get","headers","Authorization","localStorage","getItem","txs","Array","isArray","data","sentCents","receivedCents","forEach","flow","err","console","csvData","map","_tx$fromUser","_tx$toUser","from","fromUser","name","fromName","to","toUser","toName","csvHeaders","label","key","style","padding","children","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","background","border","color","borderRadius","display","flexWrap","gap","flex","minWidth","fontSize","fontWeight","alignSelf","filename","textDecoration","cursor","overflow","width","borderCollapse","textAlign","borderBottom","colSpan","length","_tx$fromUser2","_tx$toUser2","amountColor","loanLabel","onClick","_c","$RefreshReg$"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/TransactionHistory.jsx"],"sourcesContent":["// src/features/dashboard/TransactionHistory.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { CSVLink } from 'react-csv';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst TransactionHistory = () => {\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [totals, setTotals] = useState({ sent: 0, received: 0, net: 0 });\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  // --- helpers -----------------------------------------------------------\r\n\r\n  const getAmountCents = (tx) => {\r\n    if (typeof tx.amountCents === 'number') return tx.amountCents;\r\n    if (typeof tx.amount === 'number') return Math.round(tx.amount * 100);\r\n    return 0;\r\n  };\r\n\r\n  const formatDollars = (cents) => (cents / 100).toFixed(2);\r\n\r\n  const getDisplayDate = (tx) => {\r\n    const raw = tx.createdAt || tx.timestamp || tx.date;\r\n    if (!raw) return '';\r\n    return new Date(raw).toLocaleString();\r\n  };\r\n\r\n  const getDisplayType = (tx) => {\r\n    const t = (tx.type || '').toUpperCase();\r\n    switch (t) {\r\n      case 'DEPOSIT':\r\n        return 'Deposit to wallet';\r\n      case 'WITHDRAWAL':\r\n        return 'Withdrawal';\r\n      case 'REPAYMENT':\r\n        return 'Loan repayment';\r\n      case 'DISBURSEMENT':\r\n        return 'Loan disbursement';\r\n      case 'SUPERUSER_FEE':\r\n      case 'FEE':\r\n        return 'SuperUser fee';\r\n      case 'BANK_FEE':\r\n        return 'Bank fee';\r\n      case 'PLATFORM_FEE':\r\n        return 'Platform fee';\r\n      default:\r\n        return tx.type || 'Other';\r\n    }\r\n  };\r\n\r\n  // classify as money sent or received (best-effort, won’t crash)\r\n  const classifyFlow = (tx) => {\r\n    const t = (tx.type || '').toUpperCase();\r\n    const direction = (tx.direction || '').toUpperCase?.() || '';\r\n\r\n    if (direction === 'DEBIT') return 'sent';\r\n    if (direction === 'CREDIT') return 'received';\r\n\r\n    if (['DISBURSEMENT', 'WITHDRAWAL', 'SUPERUSER_FEE', 'FEE', 'BANK_FEE', 'PLATFORM_FEE'].includes(t)) {\r\n      return 'sent';\r\n    }\r\n    if (['DEPOSIT', 'REPAYMENT'].includes(t)) {\r\n      return 'received';\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const getLoanLabel = (tx) => {\r\n    if (!tx.loanId) return '';\r\n    // Show a short label like \"Loan …abcd12\" instead of full ObjectId\r\n    const id = String(tx.loanId);\r\n    const tail = id.slice(-6);\r\n    return `Loan …${tail}`;\r\n  };\r\n\r\n  const handleLoanClick = (loanId) => {\r\n    if (!loanId) return;\r\n    navigate(`/loan/${loanId}`);\r\n  };\r\n\r\n  // --- fetch on mount ----------------------------------------------------\r\n\r\n  useEffect(() => {\r\n    const fetchTransactions = async () => {\r\n      try {\r\n        setError('');\r\n        setLoading(true);\r\n\r\n        const res = await axios.get('/api/transactions', {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n        });\r\n\r\n        const txs = Array.isArray(res.data) ? res.data : [];\r\n        setTransactions(txs);\r\n\r\n        let sentCents = 0;\r\n        let receivedCents = 0;\r\n\r\n        txs.forEach((tx) => {\r\n          const cents = getAmountCents(tx);\r\n          const flow = classifyFlow(tx);\r\n          if (flow === 'sent') sentCents += cents;\r\n          if (flow === 'received') receivedCents += cents;\r\n        });\r\n\r\n        setTotals({\r\n          sent: sentCents,\r\n          received: receivedCents,\r\n          net: receivedCents - sentCents,\r\n        });\r\n      } catch (err) {\r\n        console.error('Failed to fetch transactions:', err);\r\n        setError('Failed to fetch transactions. Please try again later.');\r\n        setTransactions([]);\r\n        setTotals({ sent: 0, received: 0, net: 0 });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchTransactions();\r\n  }, []);\r\n\r\n  // --- CSV export data ---------------------------------------------------\r\n\r\n  const csvData = transactions.map((tx) => ({\r\n    date: getDisplayDate(tx),\r\n    type: getDisplayType(tx),\r\n    amount: formatDollars(getAmountCents(tx)),\r\n    loanId: tx.loanId || '',\r\n    from: tx.fromUser?.name || tx.fromName || '',\r\n    to: tx.toUser?.name || tx.toName || '',\r\n  }));\r\n\r\n  const csvHeaders = [\r\n    { label: 'Date', key: 'date' },\r\n    { label: 'Type', key: 'type' },\r\n    { label: 'Amount (USD)', key: 'amount' },\r\n    { label: 'Loan ID', key: 'loanId' },\r\n    { label: 'From', key: 'from' },\r\n    { label: 'To', key: 'to' },\r\n  ];\r\n\r\n  // --- render ------------------------------------------------------------\r\n\r\n  return (\r\n    <div style={{ padding: '2rem' }}>\r\n      <h2 style={{ marginBottom: '1rem' }}>Transaction History</h2>\r\n\r\n      {error && (\r\n        <div\r\n          style={{\r\n            marginBottom: '1rem',\r\n            background: '#fee2e2',\r\n            border: '1px solid #fecaca',\r\n            color: '#991b1b',\r\n            padding: '0.75rem 1rem',\r\n            borderRadius: 8,\r\n          }}\r\n        >\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Summary cards */}\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexWrap: 'wrap',\r\n          gap: '1rem',\r\n          marginBottom: '1.25rem',\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            flex: '1 1 180px',\r\n            minWidth: 180,\r\n            borderRadius: 12,\r\n            border: '1px solid #e2e8f0',\r\n            padding: '0.75rem 1rem',\r\n            background: '#f8fafc',\r\n          }}\r\n        >\r\n          <div style={{ fontSize: 13, color: '#64748b' }}>Total Sent</div>\r\n          <div style={{ fontSize: 20, fontWeight: 700, color: '#b91c1c' }}>\r\n            ${formatDollars(totals.sent)}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            flex: '1 1 180px',\r\n            minWidth: 180,\r\n            borderRadius: 12,\r\n            border: '1px solid #e2e8f0',\r\n            padding: '0.75rem 1rem',\r\n            background: '#f8fafc',\r\n          }}\r\n        >\r\n          <div style={{ fontSize: 13, color: '#64748b' }}>Total Received</div>\r\n          <div style={{ fontSize: 20, fontWeight: 700, color: '#166534' }}>\r\n            ${formatDollars(totals.received)}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            flex: '1 1 180px',\r\n            minWidth: 180,\r\n            borderRadius: 12,\r\n            border: '1px solid #e2e8f0',\r\n            padding: '0.75rem 1rem',\r\n            background: '#f8fafc',\r\n          }}\r\n        >\r\n          <div style={{ fontSize: 13, color: '#64748b' }}>Net</div>\r\n          <div\r\n            style={{\r\n              fontSize: 20,\r\n              fontWeight: 700,\r\n              color: totals.net >= 0 ? '#166534' : '#b91c1c',\r\n            }}\r\n          >\r\n            ${formatDollars(totals.net)}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style={{\r\n            flex: '0 0 auto',\r\n            alignSelf: 'flex-end',\r\n          }}\r\n        >\r\n          <CSVLink\r\n            data={csvData}\r\n            headers={csvHeaders}\r\n            filename=\"transactions.csv\"\r\n            style={{ textDecoration: 'none' }}\r\n          >\r\n            <button\r\n              style={{\r\n                padding: '0.5rem 0.9rem',\r\n                borderRadius: 999,\r\n                border: '1px solid #0f172a',\r\n                background: '#0f172a',\r\n                color: '#f9fafb',\r\n                fontWeight: 600,\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              ⬇️ Download CSV\r\n            </button>\r\n          </CSVLink>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div\r\n        style={{\r\n          borderRadius: 12,\r\n          border: '1px solid #e2e8f0',\r\n          overflow: 'hidden',\r\n          background: '#ffffff',\r\n        }}\r\n      >\r\n        <table\r\n          style={{\r\n            width: '100%',\r\n            borderCollapse: 'collapse',\r\n            fontSize: 14,\r\n          }}\r\n        >\r\n          <thead\r\n            style={{\r\n              background: '#f1f5f9',\r\n              textAlign: 'left',\r\n            }}\r\n          >\r\n            <tr>\r\n              <th style={{ padding: '0.75rem 1rem', borderBottom: '1px solid #e2e8f0' }}>Date</th>\r\n              <th style={{ padding: '0.75rem 1rem', borderBottom: '1px solid #e2e8f0' }}>Type</th>\r\n              <th style={{ padding: '0.75rem 1rem', borderBottom: '1px solid #e2e8f0' }}>Amount</th>\r\n              <th style={{ padding: '0.75rem 1rem', borderBottom: '1px solid #e2e8f0' }}>Loan</th>\r\n              <th style={{ padding: '0.75rem 1rem', borderBottom: '1px solid #e2e8f0' }}>From</th>\r\n              <th style={{ padding: '0.75rem 1rem', borderBottom: '1px solid #e2e8f0' }}>To</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan={6} style={{ padding: '1rem', textAlign: 'center', color: '#64748b' }}>\r\n                  Loading transactions…\r\n                </td>\r\n              </tr>\r\n            ) : transactions.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={6} style={{ padding: '1rem', textAlign: 'center', color: '#64748b' }}>\r\n                  No transactions yet. Deposits, repayments, withdrawals, and fees will appear here.\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              transactions.map((tx) => {\r\n                const cents = getAmountCents(tx);\r\n                const flow = classifyFlow(tx);\r\n                const amountColor =\r\n                  flow === 'sent' ? '#b91c1c' : flow === 'received' ? '#166534' : '#0f172a';\r\n\r\n                const loanLabel = getLoanLabel(tx);\r\n\r\n                return (\r\n                  <tr key={tx.id}>\r\n                    <td style={{ padding: '0.6rem 1rem', borderBottom: '1px solid #e2e8f0' }}>\r\n                      {getDisplayDate(tx)}\r\n                    </td>\r\n                    <td style={{ padding: '0.6rem 1rem', borderBottom: '1px solid #e2e8f0' }}>\r\n                      {getDisplayType(tx)}\r\n                    </td>\r\n                    <td\r\n                      style={{\r\n                        padding: '0.6rem 1rem',\r\n                        borderBottom: '1px solid #e2e8f0',\r\n                        fontWeight: 600,\r\n                        color: amountColor,\r\n                      }}\r\n                    >\r\n                      ${formatDollars(cents)}\r\n                    </td>\r\n                    <td style={{ padding: '0.6rem 1rem', borderBottom: '1px solid #e2e8f0' }}>\r\n                      {tx.loanId ? (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => handleLoanClick(tx.loanId)}\r\n                          style={{\r\n                            padding: '2px 8px',\r\n                            borderRadius: 999,\r\n                            border: '1px solid #e2e8f0',\r\n                            background: '#f8fafc',\r\n                            fontSize: 12,\r\n                            cursor: 'pointer',\r\n                          }}\r\n                        >\r\n                          {loanLabel}\r\n                        </button>\r\n                      ) : (\r\n                        '—'\r\n                      )}\r\n                    </td>\r\n                    <td style={{ padding: '0.6rem 1rem', borderBottom: '1px solid #e2e8f0' }}>\r\n                      {tx.fromUser?.name || tx.fromName || '—'}\r\n                    </td>\r\n                    <td style={{ padding: '0.6rem 1rem', borderBottom: '1px solid #e2e8f0' }}>\r\n                      {tx.toUser?.name || tx.toName || '—'}\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TransactionHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}