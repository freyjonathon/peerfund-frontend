{"ast":null,"code":"// src/features/wallet/walletApi.js\nconst API_BASE = '/api';\nfunction authHeaders() {\n  let t = localStorage.getItem('token') || '';\n  t = t.replace(/^\"|\"$/g, '');\n  return t ? {\n    Authorization: `Bearer ${t.startsWith('Bearer ') ? t : `Bearer ${t}`}`\n  } : {};\n}\nexport async function fetchWallet() {\n  const res = await fetch(`${API_BASE}/wallet/me`, {\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders()\n    }\n  });\n  if (!res.ok) {\n    throw new Error((await res.text()) || 'Failed to load wallet');\n  }\n  return res.json();\n}\n\n/**\n * Create a deposit intent.\n * @param {{ amountDollars?: number, amountCents?: number }} params\n */\nexport async function createDepositIntent({\n  amountDollars,\n  amountCents\n}) {\n  const body = {};\n  if (typeof amountCents === 'number' && amountCents > 0) {\n    body.amountCents = amountCents;\n  } else if (typeof amountDollars === 'number' && amountDollars > 0) {\n    body.amountDollars = amountDollars;\n  } else {\n    throw new Error('Amount must be > 0');\n  }\n  const res = await fetch(`${API_BASE}/wallet/deposit-intent`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders()\n    },\n    body: JSON.stringify(body)\n  });\n  if (!res.ok) {\n    throw new Error((await res.text()) || 'Failed to create deposit intent');\n  }\n  return res.json(); // { clientSecret, ledgerId } or { simulated, ... }\n}","map":{"version":3,"names":["API_BASE","authHeaders","t","localStorage","getItem","replace","Authorization","startsWith","fetchWallet","res","fetch","headers","ok","Error","text","json","createDepositIntent","amountDollars","amountCents","body","method","JSON","stringify"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/wallet/walletApi.js"],"sourcesContent":["// src/features/wallet/walletApi.js\nconst API_BASE = '/api';\n\nfunction authHeaders() {\n  let t = localStorage.getItem('token') || '';\n  t = t.replace(/^\"|\"$/g, '');\n  return t\n    ? { Authorization: `Bearer ${t.startsWith('Bearer ') ? t : `Bearer ${t}`}` }\n    : {};\n}\n\nexport async function fetchWallet() {\n  const res = await fetch(`${API_BASE}/wallet/me`, {\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders(),\n    },\n  });\n  if (!res.ok) {\n    throw new Error((await res.text()) || 'Failed to load wallet');\n  }\n  return res.json();\n}\n\n/**\n * Create a deposit intent.\n * @param {{ amountDollars?: number, amountCents?: number }} params\n */\nexport async function createDepositIntent({ amountDollars, amountCents }) {\n  const body = {};\n\n  if (typeof amountCents === 'number' && amountCents > 0) {\n    body.amountCents = amountCents;\n  } else if (typeof amountDollars === 'number' && amountDollars > 0) {\n    body.amountDollars = amountDollars;\n  } else {\n    throw new Error('Amount must be > 0');\n  }\n\n  const res = await fetch(`${API_BASE}/wallet/deposit-intent`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders(),\n    },\n    body: JSON.stringify(body),\n  });\n\n  if (!res.ok) {\n    throw new Error((await res.text()) || 'Failed to create deposit intent');\n  }\n\n  return res.json(); // { clientSecret, ledgerId } or { simulated, ... }\n}\n"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAG,MAAM;AAEvB,SAASC,WAAWA,CAAA,EAAG;EACrB,IAAIC,CAAC,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;EAC3CF,CAAC,GAAGA,CAAC,CAACG,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;EAC3B,OAAOH,CAAC,GACJ;IAAEI,aAAa,EAAE,UAAUJ,CAAC,CAACK,UAAU,CAAC,SAAS,CAAC,GAAGL,CAAC,GAAG,UAAUA,CAAC,EAAE;EAAG,CAAC,GAC1E,CAAC,CAAC;AACR;AAEA,OAAO,eAAeM,WAAWA,CAAA,EAAG;EAClC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGV,QAAQ,YAAY,EAAE;IAC/CW,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGV,WAAW,CAAC;IACjB;EACF,CAAC,CAAC;EACF,IAAI,CAACQ,GAAG,CAACG,EAAE,EAAE;IACX,MAAM,IAAIC,KAAK,CAAC,CAAC,MAAMJ,GAAG,CAACK,IAAI,CAAC,CAAC,KAAK,uBAAuB,CAAC;EAChE;EACA,OAAOL,GAAG,CAACM,IAAI,CAAC,CAAC;AACnB;;AAEA;AACA;AACA;AACA;AACA,OAAO,eAAeC,mBAAmBA,CAAC;EAAEC,aAAa;EAAEC;AAAY,CAAC,EAAE;EACxE,MAAMC,IAAI,GAAG,CAAC,CAAC;EAEf,IAAI,OAAOD,WAAW,KAAK,QAAQ,IAAIA,WAAW,GAAG,CAAC,EAAE;IACtDC,IAAI,CAACD,WAAW,GAAGA,WAAW;EAChC,CAAC,MAAM,IAAI,OAAOD,aAAa,KAAK,QAAQ,IAAIA,aAAa,GAAG,CAAC,EAAE;IACjEE,IAAI,CAACF,aAAa,GAAGA,aAAa;EACpC,CAAC,MAAM;IACL,MAAM,IAAIJ,KAAK,CAAC,oBAAoB,CAAC;EACvC;EAEA,MAAMJ,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGV,QAAQ,wBAAwB,EAAE;IAC3DoB,MAAM,EAAE,MAAM;IACdT,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGV,WAAW,CAAC;IACjB,CAAC;IACDkB,IAAI,EAAEE,IAAI,CAACC,SAAS,CAACH,IAAI;EAC3B,CAAC,CAAC;EAEF,IAAI,CAACV,GAAG,CAACG,EAAE,EAAE;IACX,MAAM,IAAIC,KAAK,CAAC,CAAC,MAAMJ,GAAG,CAACK,IAAI,CAAC,CAAC,KAAK,iCAAiC,CAAC;EAC1E;EAEA,OAAOL,GAAG,CAACM,IAAI,CAAC,CAAC,CAAC,CAAC;AACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}