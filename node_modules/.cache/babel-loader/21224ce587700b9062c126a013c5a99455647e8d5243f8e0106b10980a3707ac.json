{"ast":null,"code":"import _objectSpread from\"/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/features/wallet/walletApi.js\nfunction authHeaders(){const token=localStorage.getItem('token');return token?{Authorization:\"Bearer \".concat(token)}:{};}export async function fetchWallet(){const res=await fetch('/api/wallet/me',{headers:_objectSpread({'Content-Type':'application/json'},authHeaders())});if(!res.ok){const text=await res.text();throw new Error(text||'Failed to fetch wallet');}return res.json();}export async function createDepositIntent(_ref){let{amountDollars}=_ref;const res=await fetch('/api/wallet/deposit-intent',{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},authHeaders()),body:JSON.stringify({amountDollars})});const text=await res.text();let data={};try{data=text?JSON.parse(text):{};}catch(err){// ignore / non-fatal\n}if(!res.ok){throw new Error(data.error||text||'Failed to create deposit');}return data;// { clientSecret, simulated } or { simulated, available... }\n}export async function createDeposit(_ref2){let{amountDollars}=_ref2;const token=localStorage.getItem('token');const res=await fetch('/api/wallet/deposit',{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({amountDollars})});const data=await res.json().catch(()=>({}));if(!res.ok||data.ok===false){throw new Error(data.error||'Failed to create deposit');}return data;// { ok: true, availableCents, pendingCents }\n}// src/features/wallet/walletApi.js\nimport axios from'axios';export async function withdrawFromWallet(_ref3){let{amountDollars}=_ref3;const token=localStorage.getItem('token');const res=await axios.post('/api/wallet/withdraw',{amountDollars},{headers:{Authorization:\"Bearer \".concat(token),'Content-Type':'application/json'}});return res.data;}","map":{"version":3,"names":["authHeaders","token","localStorage","getItem","Authorization","concat","fetchWallet","res","fetch","headers","_objectSpread","ok","text","Error","json","createDepositIntent","_ref","amountDollars","method","body","JSON","stringify","data","parse","err","error","createDeposit","_ref2","catch","axios","withdrawFromWallet","_ref3","post"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/wallet/walletApi.js"],"sourcesContent":["// src/features/wallet/walletApi.js\nfunction authHeaders() {\n  const token = localStorage.getItem('token');\n  return token ? { Authorization: `Bearer ${token}` } : {};\n}\n\nexport async function fetchWallet() {\n  const res = await fetch('/api/wallet/me', {\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders(),\n    },\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || 'Failed to fetch wallet');\n  }\n  return res.json();\n}\n\nexport async function createDepositIntent({ amountDollars }) {\n  const res = await fetch('/api/wallet/deposit-intent', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders(),\n    },\n    body: JSON.stringify({ amountDollars }),\n  });\n\n  const text = await res.text();\n  let data = {};\n  try { data = text ? JSON.parse(text) : {}; } \n  catch (err) {\n  // ignore / non-fatal\n}\n\n  if (!res.ok) {\n    throw new Error(data.error || text || 'Failed to create deposit');\n  }\n\n  return data; // { clientSecret, simulated } or { simulated, available... }\n}\n\nexport async function createDeposit({ amountDollars }) {\n  const token = localStorage.getItem('token');\n  const res = await fetch('/api/wallet/deposit', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ amountDollars }),\n  });\n\n  const data = await res.json().catch(() => ({}));\n  if (!res.ok || data.ok === false) {\n    throw new Error(data.error || 'Failed to create deposit');\n  }\n  return data; // { ok: true, availableCents, pendingCents }\n}\n\n// src/features/wallet/walletApi.js\nimport axios from 'axios';\n\nexport async function withdrawFromWallet({ amountDollars }) {\n  const token = localStorage.getItem('token');\n\n  const res = await axios.post(\n    '/api/wallet/withdraw',\n    { amountDollars },\n    {\n      headers: {\n        Authorization: `Bearer ${token}`,\n        'Content-Type': 'application/json',\n      },\n    }\n  );\n\n  return res.data;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}