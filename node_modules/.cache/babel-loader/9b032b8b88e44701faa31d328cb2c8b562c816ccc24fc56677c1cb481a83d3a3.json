{"ast":null,"code":"var _jsxFileName = \"/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/direct/DirectRequestConfirm.jsx\",\n  _s = $RefreshSig$();\n// src/features/direct/DirectRequestConfirm.jsx\nimport React, { useMemo, useState } from 'react';\nimport { useNavigate, useParams, useSearchParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DirectRequestConfirm() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    lenderId\n  } = useParams();\n  const [sp] = useSearchParams();\n  const amount = Number(sp.get('amount') || 0);\n  const rate = Number(sp.get('rate') || 0);\n  const months = Number(sp.get('months') || 0);\n  const [submitting, setSubmitting] = useState(false);\n  const canSubmit = useMemo(() => lenderId && Number.isFinite(amount) && amount > 0 && Number.isFinite(rate) && months > 0, [lenderId, amount, rate, months]);\n  const onCancel = () => navigate(-1);\n  const onConfirm = async () => {\n    if (!canSubmit) return;\n    try {\n      setSubmitting(true);\n      const token = localStorage.getItem('token') || '';\n      const res = await fetch('/api/direct-requests', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? {\n            Authorization: `Bearer ${token}`\n          } : {})\n        },\n        body: JSON.stringify({\n          lenderId,\n          amount,\n          months,\n          apr: rate // backend expects \"apr\" (rename if yours is \"interestRate\")\n        })\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error((data === null || data === void 0 ? void 0 : data.error) || 'Failed to submit request');\n      alert('Direct loan request sent!');\n      navigate('/money-summary'); // go see it under “My Open Loan Requests”\n    } catch (e) {\n      alert(e.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-wrap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-card\",\n      style: {\n        maxWidth: 520\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-logo\",\n          children: \"PF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-title\",\n          children: \"Confirm Direct Loan Request\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-sub\",\n        children: \"Review and confirm your request.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Lender ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 14\n          }, this), \" \", lenderId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 14\n          }, this), \" $\", amount.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"APR:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 14\n          }, this), \" \", rate, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Months:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 14\n          }, this), \" \", months]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-actions\",\n        style: {\n          marginTop: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auth-btn\",\n          onClick: onCancel,\n          disabled: submitting,\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auth-btn primary\",\n          onClick: onConfirm,\n          disabled: submitting || !canSubmit,\n          children: submitting ? 'Submitting…' : 'Confirm & Send'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_s(DirectRequestConfirm, \"m+2lgBqFgW7zZqujunjr+CbQ1cg=\", false, function () {\n  return [useNavigate, useParams, useSearchParams];\n});\n_c = DirectRequestConfirm;\nvar _c;\n$RefreshReg$(_c, \"DirectRequestConfirm\");","map":{"version":3,"names":["React","useMemo","useState","useNavigate","useParams","useSearchParams","jsxDEV","_jsxDEV","DirectRequestConfirm","_s","navigate","lenderId","sp","amount","Number","get","rate","months","submitting","setSubmitting","canSubmit","isFinite","onCancel","onConfirm","token","localStorage","getItem","res","fetch","method","headers","Authorization","body","JSON","stringify","apr","data","json","catch","ok","Error","error","alert","e","message","className","children","style","maxWidth","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","toFixed","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/direct/DirectRequestConfirm.jsx"],"sourcesContent":["// src/features/direct/DirectRequestConfirm.jsx\nimport React, { useMemo, useState } from 'react';\nimport { useNavigate, useParams, useSearchParams } from 'react-router-dom';\n\nexport default function DirectRequestConfirm() {\n  const navigate = useNavigate();\n  const { lenderId } = useParams();\n  const [sp] = useSearchParams();\n\n  const amount = Number(sp.get('amount') || 0);\n  const rate   = Number(sp.get('rate')   || 0);\n  const months = Number(sp.get('months') || 0);\n\n  const [submitting, setSubmitting] = useState(false);\n  const canSubmit = useMemo(\n    () => lenderId && Number.isFinite(amount) && amount > 0 && Number.isFinite(rate) && months > 0,\n    [lenderId, amount, rate, months]\n  );\n\n  const onCancel = () => navigate(-1);\n\n  const onConfirm = async () => {\n    if (!canSubmit) return;\n    try {\n      setSubmitting(true);\n      const token = localStorage.getItem('token') || '';\n      const res = await fetch('/api/direct-requests', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify({\n          lenderId,\n          amount,\n          months,\n          apr: rate,            // backend expects \"apr\" (rename if yours is \"interestRate\")\n        }),\n      });\n\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error(data?.error || 'Failed to submit request');\n\n      alert('Direct loan request sent!');\n      navigate('/money-summary'); // go see it under “My Open Loan Requests”\n    } catch (e) {\n      alert(e.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-wrap\">\n      <div className=\"auth-card\" style={{ maxWidth: 520 }}>\n        <div className=\"auth-header\">\n          <div className=\"auth-logo\">PF</div>\n          <div className=\"auth-title\">Confirm Direct Loan Request</div>\n        </div>\n\n        <div className=\"auth-sub\">\n          Review and confirm your request.\n        </div>\n\n        <div style={{ marginTop: 12 }}>\n          <p><strong>Lender ID:</strong> {lenderId}</p>\n          <p><strong>Amount:</strong> ${amount.toFixed(2)}</p>\n          <p><strong>APR:</strong> {rate}%</p>\n          <p><strong>Months:</strong> {months}</p>\n        </div>\n\n        <div className=\"auth-actions\" style={{ marginTop: 16 }}>\n          <button className=\"auth-btn\" onClick={onCancel} disabled={submitting}>\n            Back\n          </button>\n          <button\n            className=\"auth-btn primary\"\n            onClick={onConfirm}\n            disabled={submitting || !canSubmit}\n          >\n            {submitting ? 'Submitting…' : 'Confirm & Send'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}