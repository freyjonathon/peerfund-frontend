{"ast":null,"code":"var _jsxFileName = \"/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/direct/DirectRequestConfirm.jsx\",\n  _s = $RefreshSig$();\n// src/features/direct/DirectRequestConfirm.jsx\nimport React, { useMemo, useState } from 'react';\nimport { useNavigate, useParams, useSearchParams, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DirectRequestConfirm() {\n  _s();\n  var _ref, _sp$get, _ref2, _sp$get2, _ref3, _sp$get3;\n  const navigate = useNavigate();\n  const {\n    lenderId\n  } = useParams();\n  const [sp] = useSearchParams();\n  const {\n    state\n  } = useLocation(); // <= also support history state\n\n  // prefer query params, fall back to `location.state`\n  const amount = Number((_ref = (_sp$get = sp.get('amount')) !== null && _sp$get !== void 0 ? _sp$get : state === null || state === void 0 ? void 0 : state.amount) !== null && _ref !== void 0 ? _ref : 0);\n  const rate = Number((_ref2 = (_sp$get2 = sp.get('rate')) !== null && _sp$get2 !== void 0 ? _sp$get2 : state === null || state === void 0 ? void 0 : state.rate) !== null && _ref2 !== void 0 ? _ref2 : 0);\n  const months = Number((_ref3 = (_sp$get3 = sp.get('months')) !== null && _sp$get3 !== void 0 ? _sp$get3 : state === null || state === void 0 ? void 0 : state.months) !== null && _ref3 !== void 0 ? _ref3 : 0);\n  const [submitting, setSubmitting] = useState(false);\n  const canSubmit = useMemo(() => lenderId && Number.isFinite(amount) && amount > 0 && Number.isFinite(rate) && months > 0, [lenderId, amount, rate, months]);\n  const onCancel = () => navigate(-1);\n  const onConfirm = async () => {\n    if (!canSubmit) return;\n    try {\n      setSubmitting(true);\n      const token = localStorage.getItem('token') || '';\n      const res = await fetch('/api/direct-requests', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? {\n            Authorization: `Bearer ${token}`\n          } : {})\n        },\n        body: JSON.stringify({\n          lenderId,\n          amount,\n          months,\n          apr: rate\n        })\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error((data === null || data === void 0 ? void 0 : data.error) || 'Failed to submit request');\n      alert('Direct loan request sent!');\n      navigate('/money-summary');\n    } catch (e) {\n      alert(e.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-wrap\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-card\",\n      style: {\n        maxWidth: 520\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-logo\",\n          children: \"PF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-title\",\n          children: \"Confirm Direct Loan Request\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-sub\",\n        children: \"Review and confirm your request.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Lender ID:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 14\n          }, this), \" \", lenderId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Amount:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 14\n          }, this), \" $\", amount.toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"APR:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 14\n          }, this), \" \", rate, \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Months:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 14\n          }, this), \" \", months]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-actions\",\n        style: {\n          marginTop: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auth-btn\",\n          onClick: onCancel,\n          disabled: submitting,\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"auth-btn primary\",\n          onClick: onConfirm,\n          disabled: submitting || !canSubmit,\n          children: submitting ? 'Submitting…' : 'Confirm & Send'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(DirectRequestConfirm, \"6l+WSFzhfHnSKTK7211laKXsFQs=\", false, function () {\n  return [useNavigate, useParams, useSearchParams, useLocation];\n});\n_c = DirectRequestConfirm;\nvar _c;\n$RefreshReg$(_c, \"DirectRequestConfirm\");","map":{"version":3,"names":["React","useMemo","useState","useNavigate","useParams","useSearchParams","useLocation","jsxDEV","_jsxDEV","DirectRequestConfirm","_s","_ref","_sp$get","_ref2","_sp$get2","_ref3","_sp$get3","navigate","lenderId","sp","state","amount","Number","get","rate","months","submitting","setSubmitting","canSubmit","isFinite","onCancel","onConfirm","token","localStorage","getItem","res","fetch","method","headers","Authorization","body","JSON","stringify","apr","data","json","catch","ok","Error","error","alert","e","message","className","children","style","maxWidth","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","toFixed","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/direct/DirectRequestConfirm.jsx"],"sourcesContent":["// src/features/direct/DirectRequestConfirm.jsx\nimport React, { useMemo, useState } from 'react';\nimport { useNavigate, useParams, useSearchParams, useLocation } from 'react-router-dom';\n\nexport default function DirectRequestConfirm() {\n  const navigate = useNavigate();\n  const { lenderId } = useParams();\n  const [sp] = useSearchParams();\n  const { state } = useLocation();     // <= also support history state\n\n  // prefer query params, fall back to `location.state`\n  const amount = Number(sp.get('amount') ?? state?.amount ?? 0);\n  const rate   = Number(sp.get('rate')   ?? state?.rate   ?? 0);\n  const months = Number(sp.get('months') ?? state?.months ?? 0);\n\n  const [submitting, setSubmitting] = useState(false);\n  const canSubmit = useMemo(\n    () => lenderId && Number.isFinite(amount) && amount > 0 && Number.isFinite(rate) && months > 0,\n    [lenderId, amount, rate, months]\n  );\n\n  const onCancel = () => navigate(-1);\n\n  const onConfirm = async () => {\n    if (!canSubmit) return;\n    try {\n      setSubmitting(true);\n      const token = localStorage.getItem('token') || '';\n      const res = await fetch('/api/direct-requests', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify({ lenderId, amount, months, apr: rate }),\n      });\n      const data = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error(data?.error || 'Failed to submit request');\n      alert('Direct loan request sent!');\n      navigate('/money-summary');\n    } catch (e) {\n      alert(e.message);\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"auth-wrap\">\n      <div className=\"auth-card\" style={{ maxWidth: 520 }}>\n        <div className=\"auth-header\">\n          <div className=\"auth-logo\">PF</div>\n          <div className=\"auth-title\">Confirm Direct Loan Request</div>\n        </div>\n\n        <div className=\"auth-sub\">Review and confirm your request.</div>\n\n        <div style={{ marginTop: 12 }}>\n          <p><strong>Lender ID:</strong> {lenderId}</p>\n          <p><strong>Amount:</strong> ${amount.toFixed(2)}</p>\n          <p><strong>APR:</strong> {rate}%</p>\n          <p><strong>Months:</strong> {months}</p>\n        </div>\n\n        <div className=\"auth-actions\" style={{ marginTop: 16 }}>\n          <button className=\"auth-btn\" onClick={onCancel} disabled={submitting}>Back</button>\n          <button className=\"auth-btn primary\" onClick={onConfirm} disabled={submitting || !canSubmit}>\n            {submitting ? 'Submitting…' : 'Confirm & Send'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}