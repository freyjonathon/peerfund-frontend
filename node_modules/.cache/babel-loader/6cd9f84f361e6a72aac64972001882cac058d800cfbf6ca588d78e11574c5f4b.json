{"ast":null,"code":"// src/components/TopLenders.jsx\nimport React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TopLenders=()=>{const[lenders,setLenders]=useState(null);// null initially\nconst[sortBy,setSortBy]=useState('amount');// 'amount' or 'count'\nconst token=localStorage.getItem('token');useEffect(()=>{const fetchTopLenders=async()=>{try{const res=await fetch(\"/api/leaderboard/top-lenders?sort=\".concat(sortBy),{headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok){const errorText=await res.text();throw new Error(\"Server error \".concat(res.status,\": \").concat(errorText));}const data=await res.json();if(!Array.isArray(data)){throw new Error('Expected an array from API, got: '+JSON.stringify(data));}setLenders(data);}catch(err){console.error('Error fetching top lenders:',err.message);setLenders([]);// Prevent crash if fetch fails\n}};fetchTopLenders();},[sortBy]);return/*#__PURE__*/_jsxs(\"div\",{className:\"top-lenders-section\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"subheading\",children:\"\\uD83C\\uDFC6 Top 10 Lenders\"}),/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'1rem'}}),!Array.isArray(lenders)?/*#__PURE__*/_jsx(\"p\",{children:\"Loading leaderboard...\"}):lenders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No lenders found.\"}):/*#__PURE__*/_jsxs(\"table\",{className:\"leaderboard-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lender\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Lent ($)\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Loans Given\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:lenders.map((lender,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:lender.name||'Anonymous'}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",lender.totalAmount.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:lender.totalLoans})]},lender.userId||i))})]})]});};export default TopLenders;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","TopLenders","lenders","setLenders","sortBy","setSortBy","token","localStorage","getItem","fetchTopLenders","res","fetch","concat","headers","Authorization","ok","errorText","text","Error","status","data","json","Array","isArray","JSON","stringify","err","console","error","message","className","children","style","marginBottom","length","map","lender","i","name","totalAmount","toFixed","totalLoans","userId"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/components/TopLenders.jsx"],"sourcesContent":["// src/components/TopLenders.jsx\r\nimport React, { useEffect, useState } from 'react';\r\n\r\nconst TopLenders = () => {\r\n  const [lenders, setLenders] = useState(null); // null initially\r\n  const [sortBy, setSortBy] = useState('amount'); // 'amount' or 'count'\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    const fetchTopLenders = async () => {\r\n      try {\r\n        const res = await fetch(`/api/leaderboard/top-lenders?sort=${sortBy}`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (!res.ok) {\r\n          const errorText = await res.text();\r\n          throw new Error(`Server error ${res.status}: ${errorText}`);\r\n        }\r\n\r\n        const data = await res.json();\r\n\r\n        if (!Array.isArray(data)) {\r\n          throw new Error('Expected an array from API, got: ' + JSON.stringify(data));\r\n        }\r\n\r\n        setLenders(data);\r\n      } catch (err) {\r\n        console.error('Error fetching top lenders:', err.message);\r\n        setLenders([]); // Prevent crash if fetch fails\r\n      }\r\n    };\r\n\r\n    fetchTopLenders();\r\n  }, [sortBy]);\r\n\r\n  return (\r\n    <div className=\"top-lenders-section\">\r\n      <h3 className=\"subheading\">üèÜ Top 10 Lenders</h3>\r\n      <div style={{ marginBottom: '1rem' }}>\r\n      </div>\r\n\r\n      {!Array.isArray(lenders) ? (\r\n        <p>Loading leaderboard...</p>\r\n      ) : lenders.length === 0 ? (\r\n        <p>No lenders found.</p>\r\n      ) : (\r\n        <table className=\"leaderboard-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Rank</th>\r\n              <th>Lender</th>\r\n              <th>Total Lent ($)</th>\r\n              <th>Loans Given</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {lenders.map((lender, i) => (\r\n              <tr key={lender.userId || i}>\r\n                <td>{i + 1}</td>\r\n                <td>{lender.name || 'Anonymous'}</td>\r\n                <td>${lender.totalAmount.toFixed(2)}</td>\r\n                <td>{lender.totalLoans}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TopLenders;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}