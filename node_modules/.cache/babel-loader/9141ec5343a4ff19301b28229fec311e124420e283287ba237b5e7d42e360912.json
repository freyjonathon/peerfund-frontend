{"ast":null,"code":"// src/features/wallet/walletApi.js\nfunction authHeaders() {\n  const token = localStorage.getItem('token');\n  return token ? {\n    Authorization: `Bearer ${token}`\n  } : {};\n}\nexport async function fetchWallet() {\n  const res = await fetch('/api/wallet/me', {\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders()\n    }\n  });\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || 'Failed to fetch wallet');\n  }\n  return res.json();\n}\nexport async function createDepositIntent({\n  amountDollars\n}) {\n  const res = await fetch('/api/wallet/deposit-intent', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders()\n    },\n    body: JSON.stringify({\n      amountDollars\n    })\n  });\n  const text = await res.text();\n  let data = {};\n  try {\n    data = text ? JSON.parse(text) : {};\n  } catch {}\n  if (!res.ok) {\n    throw new Error(data.error || text || 'Failed to create deposit');\n  }\n  return data; // { clientSecret, simulated } or { simulated, available... }\n}\nexport async function createDeposit({\n  amountDollars\n}) {\n  const token = localStorage.getItem('token');\n  const res = await fetch('/api/wallet/deposit', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      amountDollars\n    })\n  });\n  const data = await res.json().catch(() => ({}));\n  if (!res.ok || data.ok === false) {\n    throw new Error(data.error || 'Failed to create deposit');\n  }\n  return data; // { ok: true, availableCents, pendingCents }\n}","map":{"version":3,"names":["authHeaders","token","localStorage","getItem","Authorization","fetchWallet","res","fetch","headers","ok","text","Error","json","createDepositIntent","amountDollars","method","body","JSON","stringify","data","parse","error","createDeposit","catch"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/wallet/walletApi.js"],"sourcesContent":["// src/features/wallet/walletApi.js\nfunction authHeaders() {\n  const token = localStorage.getItem('token');\n  return token ? { Authorization: `Bearer ${token}` } : {};\n}\n\nexport async function fetchWallet() {\n  const res = await fetch('/api/wallet/me', {\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders(),\n    },\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || 'Failed to fetch wallet');\n  }\n  return res.json();\n}\n\nexport async function createDepositIntent({ amountDollars }) {\n  const res = await fetch('/api/wallet/deposit-intent', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      ...authHeaders(),\n    },\n    body: JSON.stringify({ amountDollars }),\n  });\n\n  const text = await res.text();\n  let data = {};\n  try { data = text ? JSON.parse(text) : {}; } catch {}\n\n  if (!res.ok) {\n    throw new Error(data.error || text || 'Failed to create deposit');\n  }\n\n  return data; // { clientSecret, simulated } or { simulated, available... }\n}\n\nexport async function createDeposit({ amountDollars }) {\n  const token = localStorage.getItem('token');\n  const res = await fetch('/api/wallet/deposit', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ amountDollars }),\n  });\n\n  const data = await res.json().catch(() => ({}));\n  if (!res.ok || data.ok === false) {\n    throw new Error(data.error || 'Failed to create deposit');\n  }\n  return data; // { ok: true, availableCents, pendingCents }\n}\n"],"mappings":"AAAA;AACA,SAASA,WAAWA,CAAA,EAAG;EACrB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,OAAOF,KAAK,GAAG;IAAEG,aAAa,EAAE,UAAUH,KAAK;EAAG,CAAC,GAAG,CAAC,CAAC;AAC1D;AAEA,OAAO,eAAeI,WAAWA,CAAA,EAAG;EAClC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,gBAAgB,EAAE;IACxCC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGR,WAAW,CAAC;IACjB;EACF,CAAC,CAAC;EAEF,IAAI,CAACM,GAAG,CAACG,EAAE,EAAE;IACX,MAAMC,IAAI,GAAG,MAAMJ,GAAG,CAACI,IAAI,CAAC,CAAC;IAC7B,MAAM,IAAIC,KAAK,CAACD,IAAI,IAAI,wBAAwB,CAAC;EACnD;EACA,OAAOJ,GAAG,CAACM,IAAI,CAAC,CAAC;AACnB;AAEA,OAAO,eAAeC,mBAAmBA,CAAC;EAAEC;AAAc,CAAC,EAAE;EAC3D,MAAMR,GAAG,GAAG,MAAMC,KAAK,CAAC,4BAA4B,EAAE;IACpDQ,MAAM,EAAE,MAAM;IACdP,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClC,GAAGR,WAAW,CAAC;IACjB,CAAC;IACDgB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEJ;IAAc,CAAC;EACxC,CAAC,CAAC;EAEF,MAAMJ,IAAI,GAAG,MAAMJ,GAAG,CAACI,IAAI,CAAC,CAAC;EAC7B,IAAIS,IAAI,GAAG,CAAC,CAAC;EACb,IAAI;IAAEA,IAAI,GAAGT,IAAI,GAAGO,IAAI,CAACG,KAAK,CAACV,IAAI,CAAC,GAAG,CAAC,CAAC;EAAE,CAAC,CAAC,MAAM,CAAC;EAEpD,IAAI,CAACJ,GAAG,CAACG,EAAE,EAAE;IACX,MAAM,IAAIE,KAAK,CAACQ,IAAI,CAACE,KAAK,IAAIX,IAAI,IAAI,0BAA0B,CAAC;EACnE;EAEA,OAAOS,IAAI,CAAC,CAAC;AACf;AAEA,OAAO,eAAeG,aAAaA,CAAC;EAAER;AAAc,CAAC,EAAE;EACrD,MAAMb,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,qBAAqB,EAAE;IAC7CQ,MAAM,EAAE,MAAM;IACdP,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCJ,aAAa,EAAE,UAAUH,KAAK;IAChC,CAAC;IACDe,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEJ;IAAc,CAAC;EACxC,CAAC,CAAC;EAEF,MAAMK,IAAI,GAAG,MAAMb,GAAG,CAACM,IAAI,CAAC,CAAC,CAACW,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;EAC/C,IAAI,CAACjB,GAAG,CAACG,EAAE,IAAIU,IAAI,CAACV,EAAE,KAAK,KAAK,EAAE;IAChC,MAAM,IAAIE,KAAK,CAACQ,IAAI,CAACE,KAAK,IAAI,0BAA0B,CAAC;EAC3D;EACA,OAAOF,IAAI,CAAC,CAAC;AACf","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}