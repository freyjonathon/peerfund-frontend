{"ast":null,"code":"// src/components/RepaymentTracker.jsx\nimport React,{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RepaymentTracker=()=>{const{loanId}=useParams();const[repayments,setRepayments]=useState([]);const token=localStorage.getItem('token');useEffect(()=>{const fetchRepayments=async()=>{try{const res=await fetch(\"/api/loans/\".concat(loanId,\"/repayments\"),{headers:{Authorization:\"Bearer \".concat(token)}});if(!res.ok)throw new Error('Failed to fetch repayments');const data=await res.json();setRepayments(data);}catch(err){console.error('Error fetching repayments:',err);}};fetchRepayments();},[loanId,token]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Repayment History\"}),repayments.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No repayments found.\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Due Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Amount Paid\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Paid At\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:repayments.map(repayment=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:new Date(repayment.dueDate).toLocaleDateString()}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",repayment.amount.toFixed(2)]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"$\",repayment.amountPaid.toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:repayment.status}),/*#__PURE__*/_jsx(\"td\",{children:repayment.paidAt?new Date(repayment.paidAt).toLocaleDateString():'—'})]},repayment.id))})]})]});};export default RepaymentTracker;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","RepaymentTracker","loanId","repayments","setRepayments","token","localStorage","getItem","fetchRepayments","res","fetch","concat","headers","Authorization","ok","Error","data","json","err","console","error","style","padding","children","length","map","repayment","Date","dueDate","toLocaleDateString","amount","toFixed","amountPaid","status","paidAt","id"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/RepaymentTracker.jsx"],"sourcesContent":["// src/components/RepaymentTracker.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\n\r\n\r\nconst RepaymentTracker = () => {\r\n  const { loanId } = useParams();\r\n  const [repayments, setRepayments] = useState([]);\r\n\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    const fetchRepayments = async () => {\r\n      try {\r\n        const res = await fetch(`/api/loans/${loanId}/repayments`, {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (!res.ok) throw new Error('Failed to fetch repayments');\r\n\r\n        const data = await res.json();\r\n        setRepayments(data);\r\n      } catch (err) {\r\n        console.error('Error fetching repayments:', err);\r\n      }\r\n    };\r\n\r\n    fetchRepayments();\r\n  }, [loanId, token]);\r\n\r\n  return (\r\n    <div style={{ padding: '2rem' }}>\r\n      <h2>Repayment History</h2>\r\n      {repayments.length === 0 ? (\r\n        <p>No repayments found.</p>\r\n      ) : (\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>Due Date</th>\r\n              <th>Amount</th>\r\n              <th>Amount Paid</th>\r\n              <th>Status</th>\r\n              <th>Paid At</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {repayments.map((repayment) => (\r\n              <tr key={repayment.id}>\r\n                <td>{new Date(repayment.dueDate).toLocaleDateString()}</td>\r\n                <td>${repayment.amount.toFixed(2)}</td>\r\n                <td>${repayment.amountPaid.toFixed(2)}</td>\r\n                <td>{repayment.status}</td>\r\n                <td>\r\n                  {repayment.paidAt\r\n                    ? new Date(repayment.paidAt).toLocaleDateString()\r\n                    : '—'}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RepaymentTracker;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}