{"ast":null,"code":"var _jsxFileName = \"/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/PaymentMethod.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// PaymentMethod.jsx\n\nimport { useEffect, useMemo, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { Elements, useStripe } from '@stripe/react-stripe-js';\n\n// --- Publishable key (CRA) ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst rawPk = (process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY || '').trim();\n// simple validation so we don't call Stripe with junk\nconst pk = /^pk_(test|live)_[A-Za-z0-9_]+$/.test(rawPk) ? rawPk : '';\n\n// --- Auth header helper ---\nconst authHeaders = () => {\n  const t = localStorage.getItem('token');\n  return t ? {\n    Authorization: `Bearer ${t}`\n  } : {};\n};\n\n// --- Stripe init (cached) ---\nlet cachedStripePromise;\nfunction getStripePromise() {\n  if (!pk) return null;\n  if (!cachedStripePromise) cachedStripePromise = loadStripe(pk);\n  return cachedStripePromise;\n}\nexport default function PaymentMethodPage() {\n  _s();\n  const [clientSecret, setClientSecret] = useState(null);\n  const [hasDefault, setHasDefault] = useState(false);\n  const [linking, setLinking] = useState(false);\n  const [errorMsg, setErrorMsg] = useState('');\n  const [loadingStatus, setLoadingStatus] = useState(true);\n\n  // Required by Stripe (at least name)\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const stripePromise = useMemo(getStripePromise, [pk]);\n\n  // Check if user already has a default PM\n  useEffect(() => {\n    const ac = new AbortController();\n    (async () => {\n      try {\n        const r = await fetch('/api/payments/has-default-payment-method', {\n          headers: {\n            ...authHeaders()\n          },\n          signal: ac.signal\n        });\n        const d = r.ok ? await r.json() : {\n          hasDefault: false\n        };\n        setHasDefault(!!d.hasDefault);\n      } catch {\n        setHasDefault(false);\n      } finally {\n        setLoadingStatus(false);\n      }\n    })();\n    return () => ac.abort();\n  }, []);\n  async function startBankLink() {\n    setLinking(true);\n    setErrorMsg('');\n    try {\n      const r = await fetch('/api/payments/create-setup-intent', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...authHeaders()\n        }\n      });\n      if (r.status === 401) throw new Error('Please log in again to link your bank.');\n      if (!r.ok) throw new Error((await r.text()) || 'Failed to create SetupIntent.');\n      const {\n        clientSecret\n      } = await r.json();\n      if (!clientSecret) throw new Error('No client_secret returned from server.');\n      setClientSecret(clientSecret);\n    } catch (e) {\n      setErrorMsg(e.message || 'Something went wrong starting bank link.');\n    } finally {\n      setLinking(false);\n    }\n  }\n  const disabledLinkButton = linking || !pk || !stripePromise || !fullName;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 560,\n      margin: '0 auto',\n      padding: 16\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginTop: 0\n      },\n      children: \"Payment Method\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), !pk && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fef2f2',\n        border: '1px solid #fecaca',\n        color: '#7f1d1d',\n        padding: '10px 12px',\n        borderRadius: 8,\n        marginBottom: 12\n      },\n      children: [\"Invalid or missing Stripe publishable key. In \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"p2p_contract_frontend/.env\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 57\n      }, this), ' ', \"set: \", /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"REACT_APP_STRIPE_PUBLISHABLE_KEY=pk_test_\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 16\n      }, this), \" (no quotes), then restart\", ' ', /*#__PURE__*/_jsxDEV(\"code\", {\n        children: \"npm start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), \".\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: '#fff7ed',\n        border: '1px solid #fed7aa',\n        color: '#7c2d12',\n        padding: '10px 12px',\n        borderRadius: 8,\n        marginBottom: 12\n      },\n      children: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), loadingStatus ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Checking your payment method\\u2026\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: hasDefault ? 'Bank account on file for ACH debits.' : 'No bank account on file.'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this), !hasDefault && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gap: 8,\n          margin: '8px 0 12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: fullName,\n          onChange: e => setFullName(e.target.value),\n          placeholder: \"Account holder full name\",\n          style: {\n            padding: '8px 10px',\n            border: '1px solid #e2e8f0',\n            borderRadius: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          placeholder: \"Email (optional but recommended)\",\n          style: {\n            padding: '8px 10px',\n            border: '1px solid #e2e8f0',\n            borderRadius: 8\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this), !hasDefault && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startBankLink,\n        disabled: disabledLinkButton,\n        style: {\n          background: '#4f46e5',\n          color: '#fff',\n          border: '1px solid #4f46e5',\n          padding: '8px 14px',\n          borderRadius: 8,\n          cursor: disabledLinkButton ? 'not-allowed' : 'pointer'\n        },\n        children: linking ? 'Starting…' : 'Link Bank Account'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }, this), clientSecret && stripePromise && /*#__PURE__*/_jsxDEV(Elements, {\n        stripe: stripePromise,\n        children: /*#__PURE__*/_jsxDEV(BankLinkFlow, {\n          clientSecret: clientSecret,\n          fullName: fullName,\n          email: email,\n          onComplete: () => {\n            setHasDefault(true);\n            setClientSecret(null);\n          },\n          onError: setErrorMsg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n\n/* ---------------- BankLinkFlow ---------------- */\n_s(PaymentMethodPage, \"YcUl/U9TNDl7V3dPg0uMVntSmrk=\");\n_c = PaymentMethodPage;\nfunction BankLinkFlow({\n  clientSecret,\n  fullName,\n  email,\n  onComplete,\n  onError\n}) {\n  _s2();\n  const stripe = useStripe();\n  const [working, setWorking] = useState(false);\n  async function handleLink() {\n    if (!stripe) {\n      onError === null || onError === void 0 ? void 0 : onError('Stripe not ready yet.');\n      return;\n    }\n    if (!fullName) {\n      onError === null || onError === void 0 ? void 0 : onError('Please enter the account holder’s full name.');\n      return;\n    }\n    setWorking(true);\n    try {\n      // 1) Collect via Financial Connections\n      const {\n        error: collectError\n      } = await stripe.collectBankAccountForSetup({\n        clientSecret,\n        params: {\n          payment_method_type: 'us_bank_account',\n          payment_method_data: {\n            billing_details: {\n              name: fullName,\n              ...(email ? {\n                email\n              } : {})\n            }\n          }\n        }\n      });\n      if (collectError) throw collectError;\n\n      // 2) Confirm the SetupIntent\n      const {\n        setupIntent,\n        error: confirmError\n      } = await stripe.confirmUsBankAccountSetup(clientSecret);\n      if (confirmError) throw confirmError;\n\n      // 3) React to the status\n      switch (setupIntent.status) {\n        case 'succeeded':\n          {\n            // webhook will upsert; optimistic UI flip\n            onComplete === null || onComplete === void 0 ? void 0 : onComplete();\n            alert('Bank account saved. ACH payments are now enabled.');\n            break;\n          }\n        case 'requires_action':\n          {\n            const na = setupIntent.next_action;\n            // Most common: micro-deposits required\n            if ((na === null || na === void 0 ? void 0 : na.type) === 'verify_with_microdeposits') {\n              alert('Bank linked. Stripe is sending two small micro-deposits to your account. ' + 'We’ll enable ACH after they’re verified (usually 1–2 business days).');\n              // Optional: poll a status endpoint that returns hasDefault once webhook fires\n            } else {\n              alert('Bank linked; additional verification is required.');\n            }\n            break;\n          }\n        default:\n          {\n            alert(`Setup in progress (status: ${setupIntent.status}). We'll enable ACH when Stripe finishes.`);\n            break;\n          }\n      }\n    } catch (e) {\n      onError === null || onError === void 0 ? void 0 : onError((e === null || e === void 0 ? void 0 : e.message) || 'Failed to link bank account.');\n    } finally {\n      setWorking(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: 12\n    },\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLink,\n      disabled: !stripe || working,\n      style: {\n        background: '#10b981',\n        color: '#fff',\n        border: '1px solid #10b981',\n        padding: '8px 14px',\n        borderRadius: 8,\n        cursor: !stripe || working ? 'not-allowed' : 'pointer'\n      },\n      children: working ? 'Connecting…' : 'Connect and Save Bank'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }, this);\n}\n_s2(BankLinkFlow, \"xI/djp9IF4sg6WO7GmySD1OaJqo=\", false, function () {\n  return [useStripe];\n});\n_c2 = BankLinkFlow;\nBankLinkFlow.propTypes = {\n  clientSecret: PropTypes.string.isRequired,\n  fullName: PropTypes.string.isRequired,\n  email: PropTypes.string,\n  onComplete: PropTypes.func,\n  onError: PropTypes.func\n};\nvar _c, _c2;\n$RefreshReg$(_c, \"PaymentMethodPage\");\n$RefreshReg$(_c2, \"BankLinkFlow\");","map":{"version":3,"names":["useEffect","useMemo","useState","PropTypes","loadStripe","Elements","useStripe","jsxDEV","_jsxDEV","Fragment","_Fragment","rawPk","process","env","REACT_APP_STRIPE_PUBLISHABLE_KEY","trim","pk","test","authHeaders","t","localStorage","getItem","Authorization","cachedStripePromise","getStripePromise","PaymentMethodPage","_s","clientSecret","setClientSecret","hasDefault","setHasDefault","linking","setLinking","errorMsg","setErrorMsg","loadingStatus","setLoadingStatus","fullName","setFullName","email","setEmail","stripePromise","ac","AbortController","r","fetch","headers","signal","d","ok","json","abort","startBankLink","method","status","Error","text","e","message","disabledLinkButton","style","maxWidth","margin","padding","children","marginTop","fileName","_jsxFileName","lineNumber","columnNumber","background","border","color","borderRadius","marginBottom","display","gap","type","value","onChange","target","placeholder","onClick","disabled","cursor","stripe","BankLinkFlow","onComplete","onError","_c","_s2","working","setWorking","handleLink","error","collectError","collectBankAccountForSetup","params","payment_method_type","payment_method_data","billing_details","name","setupIntent","confirmError","confirmUsBankAccountSetup","alert","na","next_action","_c2","propTypes","string","isRequired","func","$RefreshReg$"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/PaymentMethod.jsx"],"sourcesContent":["// PaymentMethod.jsx\r\n\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport { Elements, useStripe } from '@stripe/react-stripe-js';\r\n\r\n// --- Publishable key (CRA) ---\r\nconst rawPk = (process.env.REACT_APP_STRIPE_PUBLISHABLE_KEY || '').trim();\r\n// simple validation so we don't call Stripe with junk\r\nconst pk = /^pk_(test|live)_[A-Za-z0-9_]+$/.test(rawPk) ? rawPk : '';\r\n\r\n// --- Auth header helper ---\r\nconst authHeaders = () => {\r\n  const t = localStorage.getItem('token');\r\n  return t ? { Authorization: `Bearer ${t}` } : {};\r\n};\r\n\r\n// --- Stripe init (cached) ---\r\nlet cachedStripePromise;\r\nfunction getStripePromise() {\r\n  if (!pk) return null;\r\n  if (!cachedStripePromise) cachedStripePromise = loadStripe(pk);\r\n  return cachedStripePromise;\r\n}\r\n\r\nexport default function PaymentMethodPage() {\r\n  const [clientSecret, setClientSecret] = useState(null);\r\n  const [hasDefault, setHasDefault] = useState(false);\r\n  const [linking, setLinking] = useState(false);\r\n  const [errorMsg, setErrorMsg] = useState('');\r\n  const [loadingStatus, setLoadingStatus] = useState(true);\r\n\r\n  // Required by Stripe (at least name)\r\n  const [fullName, setFullName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n\r\n  const stripePromise = useMemo(getStripePromise, [pk]);\r\n\r\n  // Check if user already has a default PM\r\n  useEffect(() => {\r\n    const ac = new AbortController();\r\n    (async () => {\r\n      try {\r\n        const r = await fetch('/api/payments/has-default-payment-method', {\r\n          headers: { ...authHeaders() },\r\n          signal: ac.signal,\r\n        });\r\n        const d = r.ok ? await r.json() : { hasDefault: false };\r\n        setHasDefault(!!d.hasDefault);\r\n      } catch {\r\n        setHasDefault(false);\r\n      } finally {\r\n        setLoadingStatus(false);\r\n      }\r\n    })();\r\n    return () => ac.abort();\r\n  }, []);\r\n\r\n  async function startBankLink() {\r\n    setLinking(true);\r\n    setErrorMsg('');\r\n    try {\r\n      const r = await fetch('/api/payments/create-setup-intent', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          ...authHeaders(),\r\n        },\r\n      });\r\n      if (r.status === 401) throw new Error('Please log in again to link your bank.');\r\n      if (!r.ok) throw new Error((await r.text()) || 'Failed to create SetupIntent.');\r\n\r\n      const { clientSecret } = await r.json();\r\n      if (!clientSecret) throw new Error('No client_secret returned from server.');\r\n\r\n      setClientSecret(clientSecret);\r\n    } catch (e) {\r\n      setErrorMsg(e.message || 'Something went wrong starting bank link.');\r\n    } finally {\r\n      setLinking(false);\r\n    }\r\n  }\r\n\r\n  const disabledLinkButton = linking || !pk || !stripePromise || !fullName;\r\n\r\n  return (\r\n    <div style={{ maxWidth: 560, margin: '0 auto', padding: 16 }}>\r\n      <h2 style={{ marginTop: 0 }}>Payment Method</h2>\r\n\r\n      {!pk && (\r\n        <div\r\n          style={{\r\n            background: '#fef2f2',\r\n            border: '1px solid #fecaca',\r\n            color: '#7f1d1d',\r\n            padding: '10px 12px',\r\n            borderRadius: 8,\r\n            marginBottom: 12,\r\n          }}\r\n        >\r\n          Invalid or missing Stripe publishable key. In <code>p2p_contract_frontend/.env</code>{' '}\r\n          set: <code>REACT_APP_STRIPE_PUBLISHABLE_KEY=pk_test_…</code> (no quotes), then restart{' '}\r\n          <code>npm start</code>.\r\n        </div>\r\n      )}\r\n\r\n      {errorMsg && (\r\n        <div\r\n          style={{\r\n            background: '#fff7ed',\r\n            border: '1px solid #fed7aa',\r\n            color: '#7c2d12',\r\n            padding: '10px 12px',\r\n            borderRadius: 8,\r\n            marginBottom: 12,\r\n          }}\r\n        >\r\n          {errorMsg}\r\n        </div>\r\n      )}\r\n\r\n      {loadingStatus ? (\r\n        <p>Checking your payment method…</p>\r\n      ) : (\r\n        <>\r\n          <p>{hasDefault ? 'Bank account on file for ACH debits.' : 'No bank account on file.'}</p>\r\n\r\n          {!hasDefault && (\r\n            <div style={{ display: 'grid', gap: 8, margin: '8px 0 12px' }}>\r\n              <input\r\n                type=\"text\"\r\n                value={fullName}\r\n                onChange={(e) => setFullName(e.target.value)}\r\n                placeholder=\"Account holder full name\"\r\n                style={{ padding: '8px 10px', border: '1px solid #e2e8f0', borderRadius: 8 }}\r\n              />\r\n              <input\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                placeholder=\"Email (optional but recommended)\"\r\n                style={{ padding: '8px 10px', border: '1px solid #e2e8f0', borderRadius: 8 }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {!hasDefault && (\r\n            <button\r\n              onClick={startBankLink}\r\n              disabled={disabledLinkButton}\r\n              style={{\r\n                background: '#4f46e5',\r\n                color: '#fff',\r\n                border: '1px solid #4f46e5',\r\n                padding: '8px 14px',\r\n                borderRadius: 8,\r\n                cursor: disabledLinkButton ? 'not-allowed' : 'pointer',\r\n              }}\r\n            >\r\n              {linking ? 'Starting…' : 'Link Bank Account'}\r\n            </button>\r\n          )}\r\n\r\n          {clientSecret && stripePromise && (\r\n            <Elements stripe={stripePromise}>\r\n              <BankLinkFlow\r\n                clientSecret={clientSecret}\r\n                fullName={fullName}\r\n                email={email}\r\n                onComplete={() => {\r\n                  setHasDefault(true);\r\n                  setClientSecret(null);\r\n                }}\r\n                onError={setErrorMsg}\r\n              />\r\n            </Elements>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ---------------- BankLinkFlow ---------------- */\r\n\r\nfunction BankLinkFlow({ clientSecret, fullName, email, onComplete, onError }) {\r\n  const stripe = useStripe();\r\n  const [working, setWorking] = useState(false);\r\n\r\n  async function handleLink() {\r\n  if (!stripe) { onError?.('Stripe not ready yet.'); return; }\r\n  if (!fullName) { onError?.('Please enter the account holder’s full name.'); return; }\r\n\r\n  setWorking(true);\r\n  try {\r\n    // 1) Collect via Financial Connections\r\n    const { error: collectError } = await stripe.collectBankAccountForSetup({\r\n      clientSecret,\r\n      params: {\r\n        payment_method_type: 'us_bank_account',\r\n        payment_method_data: {\r\n          billing_details: {\r\n            name: fullName,\r\n            ...(email ? { email } : {}),\r\n          },\r\n        },\r\n      },\r\n    });\r\n    if (collectError) throw collectError;\r\n\r\n    // 2) Confirm the SetupIntent\r\n    const { setupIntent, error: confirmError } =\r\n      await stripe.confirmUsBankAccountSetup(clientSecret);\r\n    if (confirmError) throw confirmError;\r\n\r\n    // 3) React to the status\r\n    switch (setupIntent.status) {\r\n      case 'succeeded': {\r\n        // webhook will upsert; optimistic UI flip\r\n        onComplete?.();\r\n        alert('Bank account saved. ACH payments are now enabled.');\r\n        break;\r\n      }\r\n\r\n      case 'requires_action': {\r\n        const na = setupIntent.next_action;\r\n        // Most common: micro-deposits required\r\n        if (na?.type === 'verify_with_microdeposits') {\r\n          alert(\r\n            'Bank linked. Stripe is sending two small micro-deposits to your account. ' +\r\n            'We’ll enable ACH after they’re verified (usually 1–2 business days).'\r\n          );\r\n          // Optional: poll a status endpoint that returns hasDefault once webhook fires\r\n        } else {\r\n          alert('Bank linked; additional verification is required.');\r\n        }\r\n        break;\r\n      }\r\n\r\n      default: {\r\n        alert(`Setup in progress (status: ${setupIntent.status}). We'll enable ACH when Stripe finishes.`);\r\n        break;\r\n      }\r\n    }\r\n  } catch (e) {\r\n    onError?.(e?.message || 'Failed to link bank account.');\r\n  } finally {\r\n    setWorking(false);\r\n  }\r\n}\r\n\r\n  return (\r\n    <div style={{ marginTop: 12 }}>\r\n      <button\r\n        onClick={handleLink}\r\n        disabled={!stripe || working}\r\n        style={{\r\n          background: '#10b981',\r\n          color: '#fff',\r\n          border: '1px solid #10b981',\r\n          padding: '8px 14px',\r\n          borderRadius: 8,\r\n          cursor: !stripe || working ? 'not-allowed' : 'pointer',\r\n        }}\r\n      >\r\n        {working ? 'Connecting…' : 'Connect and Save Bank'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nBankLinkFlow.propTypes = {\r\n  clientSecret: PropTypes.string.isRequired,\r\n  fullName: PropTypes.string.isRequired,\r\n  email: PropTypes.string,\r\n  onComplete: PropTypes.func,\r\n  onError: PropTypes.func,\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}