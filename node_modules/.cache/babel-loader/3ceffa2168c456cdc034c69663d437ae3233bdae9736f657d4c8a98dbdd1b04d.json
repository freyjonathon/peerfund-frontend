{"ast":null,"code":"import _objectSpread from\"/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/OfferModal.jsx\nimport React,{useEffect,useMemo,useState}from'react';import'./OfferModal.css';import InlineDiscussion from'../features/loans/InlineDiscussion';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const fmtMoney=n=>typeof n==='number'&&!Number.isNaN(n)?\"$\".concat(n.toFixed(2)):'—';function getToken(){return localStorage.getItem('token')||'';}function getCurrentUserId(){const t=getToken();if(!t)return null;try{var _payload$userId;const payload=JSON.parse(atob(t.split('.')[1]||''));return(_payload$userId=payload===null||payload===void 0?void 0:payload.userId)!==null&&_payload$userId!==void 0?_payload$userId:null;}catch(_unused){return null;}}export default function OfferModal(_ref){var _loan$borrower,_loan$loanOffers,_loan$loanOffers2;let{loanId,onClose}=_ref;const[loading,setLoading]=useState(true);const[err,setErr]=useState('');const[loan,setLoan]=useState(null);const[submitting,setSubmitting]=useState(false);const[offerForm,setOfferForm]=useState({amount:'',duration:'',interestRate:'',message:''});const token=getToken();const me=useMemo(()=>getCurrentUserId(),[]);const isBorrower=(loan===null||loan===void 0?void 0:(_loan$borrower=loan.borrower)===null||_loan$borrower===void 0?void 0:_loan$borrower.id)&&loan.borrower.id===me;// fetch loan (offers + borrower)\nuseEffect(()=>{let alive=true;(async()=>{try{setLoading(true);setErr('');const res=await fetch(\"/api/loans/\".concat(loanId),{headers:token?{Authorization:\"Bearer \".concat(token)}:{}});if(!res.ok)throw new Error(await res.text());const data=await res.json();if(alive)setLoan(data);}catch(e){if(alive)setErr('Failed to load loan/offers.');console.error(e);}finally{if(alive)setLoading(false);}})();return()=>{alive=false;};},[loanId,token]);const onChange=e=>setOfferForm(f=>_objectSpread(_objectSpread({},f),{},{[e.target.name]:e.target.value}));const submitOffer=async()=>{if(!offerForm.amount||!offerForm.duration||!offerForm.interestRate){alert('Please fill amount, duration, and interest rate.');return;}try{setSubmitting(true);const res=await fetch(\"/api/loans/\".concat(loanId,\"/offers\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},token?{Authorization:\"Bearer \".concat(token)}:{}),body:JSON.stringify(offerForm)});if(!res.ok)throw new Error(await res.text());const created=await res.json();// optimistic update\nsetLoan(prev=>prev?_objectSpread(_objectSpread({},prev),{},{loanOffers:[created,...(prev.loanOffers||[])]}):prev);setOfferForm({amount:'',duration:'',interestRate:'',message:''});}catch(e){console.error(e);alert('Could not submit offer.');}finally{setSubmitting(false);}};const acceptOffer=async offerId=>{if(!window.confirm('Accept this offer and create the loan contract?'))return;try{const res=await fetch(\"/api/loans/offers/\".concat(offerId,\"/accept\"),{method:'POST',headers:_objectSpread({'Content-Type':'application/json'},token?{Authorization:\"Bearer \".concat(token)}:{})});if(!res.ok)throw new Error(await res.text());await res.json();alert('Offer accepted. Contract created!');onClose===null||onClose===void 0?void 0:onClose();}catch(e){console.error(e);alert('Failed to accept offer.');}};if(!loanId)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"ofm-backdrop\",onClick:onClose,children:/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ofm-title\",children:\"Offers for this request\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ofm-close\",onClick:onClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ofm-body\",children:loading?/*#__PURE__*/_jsx(\"div\",{children:\"Loading\\u2026\"}):err?/*#__PURE__*/_jsx(\"div\",{className:\"pf-error\",children:err}):!loan?/*#__PURE__*/_jsx(\"div\",{className:\"pf-error\",children:\"Not found.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-stats\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-stat\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ofm-stat-label\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ofm-stat-value\",children:fmtMoney(Number(loan.amount))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-stat\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ofm-stat-label\",children:\"Duration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-stat-value\",children:[loan.duration,\" months\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-stat\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ofm-stat-label\",children:\"Interest\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-stat-value\",children:[loan.interestRate,\"%\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-section-title\",style:{fontWeight:700,marginBottom:6},children:[\"Current Offers (\",((_loan$loanOffers=loan.loanOffers)===null||_loan$loanOffers===void 0?void 0:_loan$loanOffers.length)||0,\")\"]}),(_loan$loanOffers2=loan.loanOffers)!==null&&_loan$loanOffers2!==void 0&&_loan$loanOffers2.length?loan.loanOffers.map(o=>{var _o$lender;return/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-offer-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-offer-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-offer-title\",children:[/*#__PURE__*/_jsx(\"span\",{style:{width:8,height:8,borderRadius:999,background:'#6366f1',display:'inline-block'}}),/*#__PURE__*/_jsx(\"span\",{children:((_o$lender=o.lender)===null||_o$lender===void 0?void 0:_o$lender.name)||'Lender'})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:12,alignItems:'center',color:'#334155',fontSize:14},children:[/*#__PURE__*/_jsx(\"span\",{children:fmtMoney(Number(o.amount))}),/*#__PURE__*/_jsxs(\"span\",{children:[o.interestRate,\"%\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[o.duration,\" mo\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"ofm-offer-badge\",style:{background:loan.status==='FUNDED'?'#dcfce7':'#fef3c7',color:loan.status==='FUNDED'?'#166534':'#92400e',borderColor:loan.status==='FUNDED'?'#86efac':'#fde68a'},children:loan.status==='FUNDED'?'Accepted':'Pending'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-offer-body\",children:[o.message&&/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:8,color:'#334155'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Message:\"}),\" \",o.message]}),loan.status==='OPEN'&&isBorrower&&/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",onClick:()=>acceptOffer(o.id),style:{background:'#4f46e5',color:'#fff',border:'1px solid #4f46e5',borderRadius:10,padding:'6px 10px',fontWeight:700,cursor:'pointer'},children:\"Accept\"})]})]},o.id);}):/*#__PURE__*/_jsx(\"div\",{style:{color:'#64748b'},children:\"No offers yet\\u2014be the first!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"lm-details-grid\"}),/*#__PURE__*/_jsx(InlineDiscussion,{threadId:loan.id,limit:5,compact:true,showHeader:false}),loan.status==='OPEN'&&!isBorrower&&/*#__PURE__*/_jsxs(\"div\",{className:\"ofm-offer-form\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ofm-section-title\",style:{fontWeight:700,marginBottom:8},children:\"Submit an Offer\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(3,minmax(0,1fr))',gap:10},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Amount ($)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",value:offerForm.amount,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Duration (months)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"duration\",value:offerForm.duration,onChange:onChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Interest Rate (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",name:\"interestRate\",value:offerForm.interestRate,onChange:onChange})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:8},children:[/*#__PURE__*/_jsx(\"label\",{children:\"Message (optional)\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"message\",rows:3,value:offerForm.message,onChange:onChange,style:{resize:'vertical'}})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:10},children:/*#__PURE__*/_jsx(\"button\",{disabled:submitting,onClick:submitOffer,children:submitting?'Submitting…':'Submit Offer'})})]})]})})]})});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","InlineDiscussion","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","fmtMoney","n","Number","isNaN","concat","toFixed","getToken","localStorage","getItem","getCurrentUserId","t","_payload$userId","payload","JSON","parse","atob","split","userId","_unused","OfferModal","_ref","_loan$borrower","_loan$loanOffers","_loan$loanOffers2","loanId","onClose","loading","setLoading","err","setErr","loan","setLoan","submitting","setSubmitting","offerForm","setOfferForm","amount","duration","interestRate","message","token","me","isBorrower","borrower","id","alive","res","fetch","headers","Authorization","ok","Error","text","data","json","e","console","error","onChange","f","_objectSpread","target","name","value","submitOffer","alert","method","body","stringify","created","prev","loanOffers","acceptOffer","offerId","window","confirm","className","onClick","children","stopPropagation","style","marginBottom","fontWeight","length","map","o","_o$lender","width","height","borderRadius","background","display","lender","gap","alignItems","color","fontSize","status","borderColor","border","padding","cursor","threadId","limit","compact","showHeader","gridTemplateColumns","type","step","marginTop","rows","resize","disabled"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/components/OfferModal.jsx"],"sourcesContent":["// src/components/OfferModal.jsx\nimport React, { useEffect, useMemo, useState } from 'react';\nimport './OfferModal.css';\nimport InlineDiscussion from '../features/loans/InlineDiscussion';\n\nconst fmtMoney = (n) =>\n  typeof n === 'number' && !Number.isNaN(n) ? `$${n.toFixed(2)}` : '—';\n\nfunction getToken() {\n  return localStorage.getItem('token') || '';\n}\nfunction getCurrentUserId() {\n  const t = getToken();\n  if (!t) return null;\n  try {\n    const payload = JSON.parse(atob(t.split('.')[1] || ''));\n    return payload?.userId ?? null;\n  } catch {\n    return null;\n  }\n}\n\nexport default function OfferModal({ loanId, onClose }) {\n  const [loading, setLoading] = useState(true);\n  const [err, setErr] = useState('');\n  const [loan, setLoan] = useState(null);\n\n  const [submitting, setSubmitting] = useState(false);\n  const [offerForm, setOfferForm] = useState({\n    amount: '',\n    duration: '',\n    interestRate: '',\n    message: '',\n  });\n\n  const token = getToken();\n  const me = useMemo(() => getCurrentUserId(), []);\n  const isBorrower = loan?.borrower?.id && loan.borrower.id === me;\n\n  // fetch loan (offers + borrower)\n  useEffect(() => {\n    let alive = true;\n    (async () => {\n      try {\n        setLoading(true);\n        setErr('');\n        const res = await fetch(`/api/loans/${loanId}`, {\n          headers: token ? { Authorization: `Bearer ${token}` } : {},\n        });\n        if (!res.ok) throw new Error(await res.text());\n        const data = await res.json();\n        if (alive) setLoan(data);\n      } catch (e) {\n        if (alive) setErr('Failed to load loan/offers.');\n        console.error(e);\n      } finally {\n        if (alive) setLoading(false);\n      }\n    })();\n    return () => { alive = false; };\n  }, [loanId, token]);\n\n  const onChange = (e) =>\n    setOfferForm((f) => ({ ...f, [e.target.name]: e.target.value }));\n\n  const submitOffer = async () => {\n    if (!offerForm.amount || !offerForm.duration || !offerForm.interestRate) {\n      alert('Please fill amount, duration, and interest rate.');\n      return;\n    }\n    try {\n      setSubmitting(true);\n      const res = await fetch(`/api/loans/${loanId}/offers`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify(offerForm),\n      });\n      if (!res.ok) throw new Error(await res.text());\n      const created = await res.json();\n\n      // optimistic update\n      setLoan((prev) =>\n        prev\n          ? { ...prev, loanOffers: [created, ...(prev.loanOffers || [])] }\n          : prev\n      );\n      setOfferForm({ amount: '', duration: '', interestRate: '', message: '' });\n    } catch (e) {\n      console.error(e);\n      alert('Could not submit offer.');\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  const acceptOffer = async (offerId) => {\n    if (!window.confirm('Accept this offer and create the loan contract?')) return;\n    try {\n      const res = await fetch(`/api/loans/offers/${offerId}/accept`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n      });\n      if (!res.ok) throw new Error(await res.text());\n      await res.json();\n      alert('Offer accepted. Contract created!');\n      onClose?.();\n    } catch (e) {\n      console.error(e);\n      alert('Failed to accept offer.');\n    }\n  };\n\n  if (!loanId) return null;\n\n  return (\n    <div className=\"ofm-backdrop\" onClick={onClose}>\n      <div className=\"ofm-modal\" onClick={(e) => e.stopPropagation()}>\n        <div className=\"ofm-header\">\n          <div className=\"ofm-title\">Offers for this request</div>\n          <button className=\"ofm-close\" onClick={onClose}>✕</button>\n        </div>\n\n        <div className=\"ofm-body\">\n          {loading ? (\n            <div>Loading…</div>\n          ) : err ? (\n            <div className=\"pf-error\">{err}</div>\n          ) : !loan ? (\n            <div className=\"pf-error\">Not found.</div>\n          ) : (\n            <>\n              {/* Snapshot */}\n              <div className=\"ofm-stats\">\n                <div className=\"ofm-stat\">\n                  <div className=\"ofm-stat-label\">Amount</div>\n                  <div className=\"ofm-stat-value\">{fmtMoney(Number(loan.amount))}</div>\n                </div>\n                <div className=\"ofm-stat\">\n                  <div className=\"ofm-stat-label\">Duration</div>\n                  <div className=\"ofm-stat-value\">{loan.duration} months</div>\n                </div>\n                <div className=\"ofm-stat\">\n                  <div className=\"ofm-stat-label\">Interest</div>\n                  <div className=\"ofm-stat-value\">{loan.interestRate}%</div>\n                </div>\n              </div>\n\n              {/* Offers list */}\n              <div style={{ marginBottom: 12 }}>\n                <div className=\"ofm-section-title\" style={{ fontWeight: 700, marginBottom: 6 }}>\n                  Current Offers ({loan.loanOffers?.length || 0})\n                </div>\n\n                {loan.loanOffers?.length ? (\n                  loan.loanOffers.map((o) => (\n                    <div key={o.id} className=\"ofm-offer-card\">\n                      <div className=\"ofm-offer-header\">\n                        <div className=\"ofm-offer-title\">\n                          <span\n                            style={{\n                              width: 8,\n                              height: 8,\n                              borderRadius: 999,\n                              background: '#6366f1',\n                              display: 'inline-block',\n                            }}\n                          />\n                          <span>{o.lender?.name || 'Lender'}</span>\n                        </div>\n                        <div style={{ display: 'flex', gap: 12, alignItems: 'center', color: '#334155', fontSize: 14 }}>\n                          <span>{fmtMoney(Number(o.amount))}</span>\n                          <span>{o.interestRate}%</span>\n                          <span>{o.duration} mo</span>\n                          <span\n                            className=\"ofm-offer-badge\"\n                            style={{\n                              background: loan.status === 'FUNDED' ? '#dcfce7' : '#fef3c7',\n                              color: loan.status === 'FUNDED' ? '#166534' : '#92400e',\n                              borderColor: loan.status === 'FUNDED' ? '#86efac' : '#fde68a',\n                            }}\n                          >\n                            {loan.status === 'FUNDED' ? 'Accepted' : 'Pending'}\n                          </span>\n                        </div>\n                      </div>\n\n                      <div className=\"ofm-offer-body\">\n                        {o.message && (\n                          <div style={{ marginBottom: 8, color: '#334155' }}>\n                            <strong>Message:</strong> {o.message}\n                          </div>\n                        )}\n\n                        {loan.status === 'OPEN' && isBorrower && (\n                          <button\n                            className=\"action-btn primary\"\n                            onClick={() => acceptOffer(o.id)}\n                            style={{\n                              background: '#4f46e5',\n                              color: '#fff',\n                              border: '1px solid #4f46e5',\n                              borderRadius: 10,\n                              padding: '6px 10px',\n                              fontWeight: 700,\n                              cursor: 'pointer',\n                            }}\n                          >\n                            Accept\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <div style={{ color: '#64748b' }}>No offers yet—be the first!</div>\n                )}\n              </div>\n\n                <div className=\"lm-details-grid\" />\n                                    {/* Inline public discussion */}\n                                    <InlineDiscussion threadId={loan.id} limit={5} compact showHeader={false} />\n                                  \n\n              {/* Submit offer (for lenders) */}\n              {loan.status === 'OPEN' && (!isBorrower) && (\n                <div className=\"ofm-offer-form\">\n                  <div className=\"ofm-section-title\" style={{ fontWeight: 700, marginBottom: 8 }}>\n                    Submit an Offer\n                  </div>\n\n                  <div style={{ display: 'grid', gridTemplateColumns: 'repeat(3,minmax(0,1fr))', gap: 10 }}>\n                    <div>\n                      <label>Amount ($)</label>\n                      <input\n                        type=\"number\"\n                        name=\"amount\"\n                        value={offerForm.amount}\n                        onChange={onChange}\n                      />\n                    </div>\n                    <div>\n                      <label>Duration (months)</label>\n                      <input\n                        type=\"number\"\n                        name=\"duration\"\n                        value={offerForm.duration}\n                        onChange={onChange}\n                      />\n                    </div>\n                    <div>\n                      <label>Interest Rate (%)</label>\n                      <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        name=\"interestRate\"\n                        value={offerForm.interestRate}\n                        onChange={onChange}\n                      />\n                    </div>\n                  </div>\n\n                  <div style={{ marginTop: 8 }}>\n                    <label>Message (optional)</label>\n                    <textarea\n                      name=\"message\"\n                      rows={3}\n                      value={offerForm.message}\n                      onChange={onChange}\n                      style={{ resize: 'vertical' }}\n                    />\n                  </div>\n\n                  <div style={{ marginTop: 10 }}>\n                    <button\n                      disabled={submitting}\n                      onClick={submitOffer}\n                    >\n                      {submitting ? 'Submitting…' : 'Submit Offer'}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}