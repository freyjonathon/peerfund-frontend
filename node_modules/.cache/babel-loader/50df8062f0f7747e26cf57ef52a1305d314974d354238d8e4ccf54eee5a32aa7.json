{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Documents=()=>{const navigate=useNavigate();const[documents,setDocuments]=useState([]);useEffect(()=>{fetch('/api/documents',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(res=>res.json()).then(data=>{if(Array.isArray(data)){setDocuments(data);}else if(Array.isArray(data.documents)){setDocuments(data.documents);}else{console.error('Unexpected document format:',data);setDocuments([]);}}).catch(err=>console.error('Error loading documents:',err));},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem'},children:[/*#__PURE__*/_jsxs(\"nav\",{style:{marginBottom:'2rem',borderBottom:'1px solid #ccc',paddingBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),style:navBtnStyle,children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),style:navBtnStyle,children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/create-loan'),style:navBtnStyle,children:\"Request a Loan\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/loan-marketplace'),style:navBtnStyle,children:\"Open Loans\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/messages'),style:navBtnStyle,children:\"Messages\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/profile'),style:navBtnStyle,children:\"Profile\"})]}),/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:'2rem',marginBottom:'1rem'},children:\"My Documents\"}),/*#__PURE__*/_jsx(\"p\",{style:{marginBottom:'2rem'},children:\"This section will contain all your loan agreements and received documents.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/money-summary'),style:actionBtnStyle,children:\"My Money Summary\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/history'),style:actionBtnStyle,children:\"Loan History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/payment-method'),style:actionBtnStyle,children:\"My Payment Method\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/documents'),style:actionBtnStyle,children:\"My Documents\"})]}),documents.length===0?/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'2rem'},children:\"No documents yet.\"}):/*#__PURE__*/_jsx(\"ul\",{style:{marginTop:'2rem'},children:documents.map(doc=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:doc.title}),\" (\",doc.type,\") \\u2014\",' ',/*#__PURE__*/_jsx(\"button\",{onClick:async()=>{try{const res=await fetch(\"/api/documents/\".concat(doc.id),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});if(!res.ok)throw new Error('Failed to fetch document');const blob=await res.blob();const url=window.URL.createObjectURL(blob);window.open(url,'_blank');setTimeout(()=>URL.revokeObjectURL(url),1000);}catch(err){console.error('Error opening document:',err);alert('Unable to open contract document.');}},style:{cursor:'pointer',color:'blue',textDecoration:'underline'},children:\"View Contract\"})]},doc.id))})]});};const navBtnStyle={marginRight:'1rem',padding:'0.5rem 1rem',fontSize:'1rem',backgroundColor:'#f5f5f5',border:'1px solid #ccc',cursor:'pointer'};const actionBtnStyle={padding:'0.75rem 1.5rem',fontSize:'1rem',backgroundColor:'#e0f7fa',border:'1px solid #0097a7',borderRadius:'4px',cursor:'pointer'};export default Documents;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Documents","navigate","documents","setDocuments","fetch","headers","Authorization","concat","localStorage","getItem","then","res","json","data","Array","isArray","console","error","catch","err","style","padding","children","marginBottom","borderBottom","paddingBottom","onClick","navBtnStyle","fontSize","display","gap","flexWrap","actionBtnStyle","length","marginTop","map","doc","title","type","id","ok","Error","blob","url","window","URL","createObjectURL","open","setTimeout","revokeObjectURL","alert","cursor","color","textDecoration","marginRight","backgroundColor","border","borderRadius"],"sources":["/Users/alabamalewis/Desktop/PeerFund/p2p_contract_frontend/src/features/dashboard/Documents.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Documents = () => {\r\n  const navigate = useNavigate();\r\n  const [documents, setDocuments] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/documents', {\r\n      headers: {\r\n        Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n      }\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (Array.isArray(data)) {\r\n          setDocuments(data);\r\n        } else if (Array.isArray(data.documents)) {\r\n          setDocuments(data.documents);\r\n        } else {\r\n          console.error('Unexpected document format:', data);\r\n          setDocuments([]);\r\n        }\r\n      })\r\n      .catch(err => console.error('Error loading documents:', err));\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ padding: '2rem' }}>\r\n      <nav style={{ marginBottom: '2rem', borderBottom: '1px solid #ccc', paddingBottom: '1rem' }}>\r\n        <button onClick={() => navigate('/')} style={navBtnStyle}>Home</button>\r\n        <button onClick={() => navigate('/dashboard')} style={navBtnStyle}>Dashboard</button>\r\n        <button onClick={() => navigate('/create-loan')} style={navBtnStyle}>Request a Loan</button>\r\n        <button onClick={() => navigate('/loan-marketplace')} style={navBtnStyle}>Open Loans</button>\r\n        <button onClick={() => navigate('/messages')} style={navBtnStyle}>Messages</button>\r\n        <button onClick={() => navigate('/profile')} style={navBtnStyle}>Profile</button>\r\n      </nav>\r\n\r\n      <h2 style={{ fontSize: '2rem', marginBottom: '1rem' }}>My Documents</h2>\r\n      <p style={{ marginBottom: '2rem' }}>This section will contain all your loan agreements and received documents.</p>\r\n\r\n      <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>\r\n        <button onClick={() => navigate('/money-summary')} style={actionBtnStyle}>My Money Summary</button>\r\n        <button onClick={() => navigate('/history')} style={actionBtnStyle}>Loan History</button>\r\n        <button onClick={() => navigate('/payment-method')} style={actionBtnStyle}>My Payment Method</button>\r\n        <button onClick={() => navigate('/documents')} style={actionBtnStyle}>My Documents</button>\r\n      </div>\r\n\r\n      {documents.length === 0 ? (\r\n        <p style={{ marginTop: '2rem' }}>No documents yet.</p>\r\n      ) : (\r\n        <ul style={{ marginTop: '2rem' }}>\r\n          {documents.map(doc => (\r\n            <li key={doc.id} style={{ marginBottom: '1rem' }}>\r\n              <strong>{doc.title}</strong> ({doc.type}) â€”{' '}\r\n              <button\r\n                onClick={async () => {\r\n                  try {\r\n                    const res = await fetch(`/api/documents/${doc.id}`, {\r\n                      headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem('token')}`,\r\n                      },\r\n                    });\r\n\r\n                    if (!res.ok) throw new Error('Failed to fetch document');\r\n                    const blob = await res.blob();\r\n                    const url = window.URL.createObjectURL(blob);\r\n                    window.open(url, '_blank');\r\n                    setTimeout(() => URL.revokeObjectURL(url), 1000);\r\n                  } catch (err) {\r\n                    console.error('Error opening document:', err);\r\n                    alert('Unable to open contract document.');\r\n                  }\r\n                }}\r\n                style={{ cursor: 'pointer', color: 'blue', textDecoration: 'underline' }}\r\n              >\r\n                View Contract\r\n              </button>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst navBtnStyle = {\r\n  marginRight: '1rem',\r\n  padding: '0.5rem 1rem',\r\n  fontSize: '1rem',\r\n  backgroundColor: '#f5f5f5',\r\n  border: '1px solid #ccc',\r\n  cursor: 'pointer',\r\n};\r\n\r\nconst actionBtnStyle = {\r\n  padding: '0.75rem 1.5rem',\r\n  fontSize: '1rem',\r\n  backgroundColor: '#e0f7fa',\r\n  border: '1px solid #0097a7',\r\n  borderRadius: '4px',\r\n  cursor: 'pointer',\r\n};\r\n\r\nexport default Documents;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}